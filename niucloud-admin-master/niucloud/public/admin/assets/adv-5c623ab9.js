import{d as L,v as U,f as j,l as M,r as P,h,c as q,e as n,w as r,a as s,u as a,t as d,k as o,i as f,J as F,m as R,z as b,a4 as J,ao as K,Y,E as G,a5 as H,C as O,D as Q,a6 as W,a7 as X,L as Z,M as tt,p as et,g as at,_ as ot}from"./index-9f163f98.js";/* empty css                   *//* empty css                *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                  */import{g as it,d as nt,e as st}from"./web-6ff8c968.js";import{_ as lt}from"./adv-edit.vue_vue_type_style_index_0_lang-a7438c99.js";/* empty css                  *//* empty css                   *//* empty css                *//* empty css                        */import"./index-b01212c8.js";import"./index.vue_vue_type_style_index_0_lang-eb3f7737.js";import"./attachment-d1610ab5.js";import"./index.vue_vue_type_script_setup_true_lang-761ba1b4.js";import"./el-form-item-4ed993c7.js";/* empty css               *//* empty css                  *//* empty css                    *//* empty css                         */import"./index.vue_vue_type_script_setup_true_lang-e32ef5b5.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-b29ac1a4.js";import"./sys-135535fa.js";import"./sortable.esm-be94e56d.js";import"./web-link.vue_vue_type_style_index_0_lang-e4df6a3b.js";const y=_=>(et("data-v-a5a575a5"),_=_(),at(),_),rt={class:"main-container"},dt={class:"flex justify-between items-center mb-[15px] ml-[15px]"},pt={class:"flex items-center"},mt=y(()=>s("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1)),ct={class:"ml-[1px]"},_t=y(()=>s("span",{class:"text-[#999] mx-[12px]"},"|",-1)),ut={class:"right"},vt={class:"mt-[10px]"},gt={class:"w-[40px] h-[40px] flex items-center"},ft={class:"mt-[16px] flex justify-end"},xt=L({__name:"adv",setup(_){const g=U(),k=j(),w=g.meta.title,x=g.query.adv_key,C=g.query.ap_name,e=M({page:1,limit:10,total:0,loading:!0,data:[]}),p=(l=1)=>{e.loading=!0,e.page=l,it({page:e.page,limit:e.limit,adv_key:x}).then(i=>{e.loading=!1,e.data=i.data.data,e.total=i.data.total}).catch(()=>{e.loading=!1})};p();const c=P(null),E=()=>{c.value.setFormData({adv_key:x,ap_name:C}),c.value.showDialog=!0},D=l=>{c.value.setFormData(l),c.value.showDialog=!0},z=l=>{J.confirm(o("advDeleteTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{nt(l).then(()=>{p()}).catch(()=>{})})},B={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},T=K((l,i)=>{if(isNaN(l)||!B.number.test(l)){Y({type:"warning",message:`${o("sortTips")}`});return}l>99999999&&(i.sort=99999999),st({id:i.adv_id,sort:l}).then(u=>{p()})});return(l,i)=>{const u=G,m=H,$=O,I=Q,N=W,A=X,V=Z,S=tt;return h(),q("div",rt,[n(V,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[s("div",dt,[s("div",pt,[s("div",{class:"text-[#666] cursor-pointer text-[14px]",onClick:i[0]||(i[0]=t=>a(k).push("/web/adv_position"))},[mt,s("span",ct,d(a(o)("returnToPreviousPage")),1)]),_t,s("span",ut,d(a(w)),1)]),n(u,{type:"primary",onClick:E},{default:r(()=>[f(d(a(o)("addAdv")),1)]),_:1})]),s("div",vt,[F((h(),R(N,{data:e.data,size:"large"},{empty:r(()=>[s("span",null,d(e.loading?"":a(o)("emptyData")),1)]),default:r(()=>[n(m,{prop:"adv_title",label:a(o)("advName"),"min-width":"120"},null,8,["label"]),n(m,{label:a(o)("advUrl"),"min-width":"120"},{default:r(({row:t})=>[s("div",null,d(t.adv_url?t.adv_url.url:""),1)]),_:1},8,["label"]),n(m,{prop:"ap_name",label:a(o)("advPosition"),"min-width":"120"},null,8,["label"]),n(m,{label:a(o)("advImg"),"min-width":"180"},{default:r(({row:t})=>[s("div",gt,[n($,{src:a(b)(t.adv_image),"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[a(b)(t.adv_image)],"initial-index":4,fit:"cover"},null,8,["src","zoom-rate","min-scale","preview-src-list"])])]),_:1},8,["label"]),n(m,{label:a(o)("sort"),"min-width":"120"},{default:r(({row:t})=>[n(I,{modelValue:t.sort,"onUpdate:modelValue":v=>t.sort=v,modelModifiers:{trim:!0},class:"!w-[70px]",maxlength:"8",onBlur:v=>a(T)(t.sort,t)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),n(m,{label:a(o)("operation"),fixed:"right","min-width":"120",align:"right"},{default:r(({row:t})=>[n(u,{type:"primary",link:"",onClick:v=>D(t)},{default:r(()=>[f(d(a(o)("edit")),1)]),_:2},1032,["onClick"]),n(u,{type:"primary",link:"",onClick:v=>z(t.adv_id)},{default:r(()=>[f(d(a(o)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[S,e.loading]]),s("div",ft,[n(A,{"current-page":e.page,"onUpdate:current-page":i[1]||(i[1]=t=>e.page=t),"page-size":e.limit,"onUpdate:page-size":i[2]||(i[2]=t=>e.limit=t),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:i[3]||(i[3]=t=>p()),onCurrentChange:p},null,8,["current-page","page-size","total"])])]),n(lt,{ref_key:"editAdvDialog",ref:c,onComplete:p},null,512)]),_:1})])}}});const oe=ot(xt,[["__scopeId","data-v-a5a575a5"]]);export{oe as default};
