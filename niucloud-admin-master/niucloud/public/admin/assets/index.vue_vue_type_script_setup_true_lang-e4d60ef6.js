import{d as F,r as t,l as H,ax as W,al as q,Y as U,k as o,h as n,m as R,w as i,e as p,c as v,a as l,t as r,u as s,i as z,B as y,z as B,ac as A,ad as M,C as Y,E as G,D as J,S as K}from"./index-9f163f98.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                    */import{b as O}from"./browser-a1ac24ac.js";import{r as X,C as Z}from"./sys-135535fa.js";const ee={key:0,class:"promote-flex flex"},ae={class:"promote-img flex justify-center items-center bg-[#f8f8f8] w-[150px] h-[150px]"},te={class:"px-[20px] flex-1"},oe={class:"mb-[10px]"},se=["href"],le={key:1,class:"promote-flex flex"},ne={class:"promote-img flex justify-center items-center bg-[#f8f8f8] w-[150px] h-[150px]"},pe={class:"w-[150px] h-[150px] text-[14px] text-center leading-[150px]"},re={key:1,class:"w-[150px] h-[150px] text-[14px] text-center leading-[150px]"},ce={key:0,class:"px-[20px] flex-1"},ie=["href"],be=F({__name:"index",setup(de,{expose:D}){const x=t(!1),d=t("h5"),b=t("");t("");const f=t(""),u=t(""),c=H({path:""});X().then(a=>{b.value=a.data.wap_url});const S=()=>{const a=g.value.map(e=>`${encodeURIComponent(e.name)}=${encodeURIComponent(e.value)}`).join("&");u.value=`${b.value}${h.value}${a?"?"+a:""}`,O.toDataURL(u.value,{errorCorrectionLevel:"L",margin:0,width:120}).then(e=>{f.value=e})},$=()=>{let a=h.value;a.startsWith("/")&&(a=a.slice(1)),Z({page:a,folder:k.value,params:g.value.map(e=>({column_name:e.name,column_value:e.value}))}).then(e=>{e.data&&(c.path=e.data.weapp_path)})},h=t(""),g=t([]),C=t(""),k=t(""),I=(a,e,m,w)=>{h.value=a,g.value=e,C.value=m,k.value=w,S(),$(),x.value=!0},{copy:L,isSupported:N,copied:E}=W(),Q=a=>{N.value||U({message:o("notSupportCopy"),type:"warning"}),L(a)};return q(E,()=>{E.value&&U({message:o("copySuccess"),type:"success"})}),D({show:I}),(a,e)=>{const m=A,w=M,V=Y,j=G,P=J,T=K;return n(),R(T,{modelValue:x.value,"onUpdate:modelValue":e[2]||(e[2]=_=>x.value=_),title:C.value,width:"500px","destroy-on-close":!0},{default:i(()=>[p(w,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=_=>d.value=_),class:"mb-[10px]"},{default:i(()=>[p(m,{label:"H5",name:"h5"}),p(m,{label:"微信小程序",name:"weapp"})]),_:1},8,["modelValue"]),d.value==="h5"?(n(),v("div",ee,[l("div",ae,[p(V,{src:f.value},null,8,["src"])]),l("div",te,[l("div",oe,r(s(o)("promoteUrl")),1),p(P,{class:"mb-[10px]",readonly:"",value:u.value},{append:i(()=>[p(j,{onClick:e[1]||(e[1]=_=>Q(u.value))},{default:i(()=>[z(r(s(o)("copy")),1)]),_:1})]),_:1},8,["value"]),l("a",{class:"text-primary",href:f.value,download:""},r(s(o)("downLoadQRCode")),9,se)])])):y("",!0),d.value==="weapp"?(n(),v("div",le,[l("div",ne,[c.path?(n(),R(V,{key:0,src:s(B)(c.path),class:"w-[150px] h-[150px]"},{error:i(()=>[l("div",pe,r(s(o)("configureFailed")),1)]),_:1},8,["src"])):(n(),v("div",re,r(s(o)("configureFailed")),1))]),c.path?(n(),v("div",ce,[l("a",{class:"text-primary",href:s(B)(c.path),target:"_blank",download:""},r(s(o)("downLoadQRCode")),9,ie)])):y("",!0)])):y("",!0)]),_:1},8,["modelValue","title"])}}});export{be as _};
