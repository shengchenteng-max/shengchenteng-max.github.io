import{d as G,v as H,f as J,r as b,l as W,bf as q,h as g,c as A,e as a,w as l,a as _,t as p,u as n,i as c,k as e,J as K,m as k,bg as Q,a4 as y,E as X,ac as Y,ad as Z,D as ee,G as te,H as ae,L as ne,a5 as re,ab as le,a6 as oe,a7 as ie,M as se}from"./index-9f163f98.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    *//* empty css                  */import{f as pe,m as ce,h as me,t as de,r as ue}from"./printer-1b60d41f.js";const fe={class:"main-container"},_e={class:"flex justify-between items-center mb-[5px]"},ge={class:"text-lg"},he={class:"mt-[10px]"},ve={class:"mt-[16px] flex justify-end"},je=G({__name:"list",setup(be){const B=H(),h=J(),$=B.meta.title,s=b(!1),N=o=>{h.push({path:o})},t=W({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{printer_name:""}}),P=b(),m=(o=1)=>{t.loading=!0,t.page=o,pe({page:t.page,limit:t.limit,...t.searchParam}).then(r=>{t.loading=!1,t.data=r.data.data,t.total=r.data.total,Q(t.page,t.limit,t.searchParam)}).catch(()=>{t.loading=!1})};m(q(t.searchParam).page);const v=b(!1),C=(o,r)=>{v.value||(v.value=!0,ce({printer_id:o,status:r}).then(d=>{m(),v.value=!1}))},z=()=>{h.push("/printer/add")},F=o=>{h.push("/printer/edit?printer_id="+o.printer_id)},S=o=>{y.confirm(e("printerDeleteTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{s.value||(s.value=!0,me(o).then(()=>{m(),s.value=!1}).catch(()=>{s.value=!1}))})},V=o=>{o&&(o.resetFields(),m())},D=o=>{y.confirm(e("testPrintTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{s.value||(s.value=!0,de(o).then(r=>{s.value=!1}).catch(()=>{s.value=!1}))})},R=o=>{y.confirm(e("refreshTokenTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{s.value||(s.value=!0,ue(o).then(r=>{m(),s.value=!1}).catch(()=>{s.value=!1}))})};return(o,r)=>{const d=X,T=Y,L=Z,M=ee,x=te,j=ae,w=ne,u=re,E=le,U=oe,I=ie,O=se;return g(),A("div",fe,[a(w,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[_("div",_e,[_("span",ge,p(n($)),1),a(d,{type:"primary",onClick:z},{default:l(()=>[c(p(n(e)("addPrinter")),1)]),_:1})]),a(L,{class:"demo-tabs","model-value":"/printer/list",onTabChange:N},{default:l(()=>[a(T,{label:n(e)("tabPrinterManager"),name:"/printer/list"},null,8,["label"]),a(T,{label:n(e)("tabPrinterTemplate"),name:"/printer/template/list"},null,8,["label"])]),_:1}),a(w,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:l(()=>[a(j,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:P},{default:l(()=>[a(x,{label:n(e)("printerName"),prop:"printer_name"},{default:l(()=>[a(M,{modelValue:t.searchParam.printer_name,"onUpdate:modelValue":r[0]||(r[0]=i=>t.searchParam.printer_name=i),modelModifiers:{trim:!0},placeholder:n(e)("printerNamePlaceholder"),maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(x,null,{default:l(()=>[a(d,{type:"primary",onClick:r[1]||(r[1]=i=>m())},{default:l(()=>[c(p(n(e)("search")),1)]),_:1}),a(d,{onClick:r[2]||(r[2]=i=>V(P.value))},{default:l(()=>[c(p(n(e)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),_("div",he,[K((g(),k(U,{data:t.data,size:"large"},{empty:l(()=>[_("span",null,p(t.loading?"":n(e)("emptyData")),1)]),default:l(()=>[a(u,{prop:"printer_name",label:n(e)("printerName"),"min-width":"220","show-overflow-tooltip":!0},null,8,["label"]),a(u,{prop:"brand_name",label:n(e)("brand"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),a(u,{prop:"print_width",label:n(e)("printWidth"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),a(u,{prop:"status",label:n(e)("status"),"min-width":"80","show-overflow-tooltip":!0},{default:l(({row:i})=>[i.status==1?(g(),k(E,{key:0,type:"success",onClick:f=>C(i.printer_id,0),class:"cursor-pointer"},{default:l(()=>[c(p(n(e)("statusOn")),1)]),_:2},1032,["onClick"])):(g(),k(E,{key:1,type:"info",onClick:f=>C(i.printer_id,1),class:"cursor-pointer"},{default:l(()=>[c(p(n(e)("statusOff")),1)]),_:2},1032,["onClick"]))]),_:1},8,["label"]),a(u,{label:n(e)("operation"),fixed:"right","min-width":"120"},{default:l(({row:i})=>[a(d,{type:"primary",link:"",onClick:f=>D(i.printer_id)},{default:l(()=>[c(p(n(e)("testPrint")),1)]),_:2},1032,["onClick"]),a(d,{type:"primary",link:"",onClick:f=>R(i.printer_id)},{default:l(()=>[c(p(n(e)("refreshToken")),1)]),_:2},1032,["onClick"]),a(d,{type:"primary",link:"",onClick:f=>F(i)},{default:l(()=>[c(p(n(e)("edit")),1)]),_:2},1032,["onClick"]),a(d,{type:"primary",link:"",onClick:f=>S(i.printer_id)},{default:l(()=>[c(p(n(e)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[O,t.loading]]),_("div",ve,[a(I,{"current-page":t.page,"onUpdate:current-page":r[3]||(r[3]=i=>t.page=i),"page-size":t.limit,"onUpdate:page-size":r[4]||(r[4]=i=>t.limit=i),layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:r[5]||(r[5]=i=>m()),onCurrentChange:m},null,8,["current-page","page-size","total"])])])]),_:1})])}}});export{je as default};
