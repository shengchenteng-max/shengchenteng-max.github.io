import{d as F,f as P,r as y,l as A,h as B,c as G,e as t,w as i,a as r,t as p,u as s,k as o,i as d,J as R,m as J,ae as C,a4 as q,ac as H,ad as I,b5 as O,ag as Q,E as W,a5 as X,a6 as Y,a7 as Z,L as ee,M as te}from"./index-9f163f98.js";/* empty css                   *//* empty css                *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                  *//* empty css                       *//* empty css                    */import{j as ae,k as le,l as oe,m as ne,n as ie,o as se}from"./wechat-cc27ccf3.js";import D from"./reply-form-0f895cf0.js";/* empty css                */import"./el-form-item-4ed993c7.js";import"./index.vue_vue_type_style_index_0_lang-7b0faeec.js";/* empty css                  *//* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-761ba1b4.js";import"./index.vue_vue_type_style_index_0_lang-eb3f7737.js";import"./attachment-d1610ab5.js";/* empty css                        *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                         */import"./index.vue_vue_type_script_setup_true_lang-e32ef5b5.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-b29ac1a4.js";import"./sys-135535fa.js";import"./index-b01212c8.js";import"./sortable.esm-be94e56d.js";import"./upload-media.vue_vue_type_script_setup_true_lang-e9c1aaab.js";import"./select-wechat-media.vue_vue_type_script_setup_true_lang-3b52e284.js";/* empty css                 */import"./test-71dfb9c1.js";import"./news-card.vue_vue_type_script_setup_true_lang-05c08c95.js";const re={class:"main-container"},pe={class:"flex justify-between items-center"},de={class:"text-page-title"},me={class:"flex justify-between items-center"},ue={class:"mt-[10px]"},ce={class:"mt-[16px] flex justify-end"},ye={class:"mt-[20px]"},_e={class:"mt-[20px]"},st=F({__name:"reply",setup(fe){const k=P(),x=y("/channel/wechat/reply"),u=y("keyword"),z=()=>{k.push("/channel/wechat/keyword_reply_edit")},K=l=>{k.push("/channel/wechat/keyword_reply_edit?id="+l.id)},U=l=>{q.confirm(o("replyDeleteTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{oe(l.id).then(()=>{h()}).catch(()=>{})})},j=l=>{k.push({path:x.value})},g=y({}),v=y({});ae().then(({data:l})=>{l.length!=0&&(g.value=l.content)}).catch(),le().then(({data:l})=>{l.length!=0&&(v.value=l.content)}).catch();const V=y(null),E=y(null),T=async()=>{var w,c;let l=!0,e,m={};switch(u.value){case"default":await((w=V.value)==null?void 0:w.verify().then(_=>{l=_})),e=se,m=g.value;break;case"subscribe":await((c=E.value)==null?void 0:c.verify().then(_=>{l=_})),e=ie,m=v.value;break}l&&e({content:m}).then(()=>{}).catch()},n=A({page:1,limit:10,total:0,loading:!0,data:[]}),h=(l=1)=>{n.loading=!0,n.page=l,ne({page:n.page,limit:n.limit}).then(e=>{n.loading=!1,n.data=e.data.data,n.total=e.data.total}).catch(()=>{n.loading=!1})};return h(),(l,e)=>{const m=H,w=I,c=O,_=Q,f=W,b=X,S=Y,$=Z,L=ee,N=te;return B(),G("div",re,[t(L,{class:"card !border-none",shadow:"never"},{default:i(()=>[r("div",pe,[r("span",de,p(s(o)("title")),1)]),t(w,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),class:"my-[20px]",onTabChange:j},{default:i(()=>[t(m,{label:s(o)("wechatAccessFlow"),name:"/channel/wechat"},null,8,["label"]),t(m,{label:s(o)("customMenu"),name:"/channel/wechat/menu"},null,8,["label"]),t(m,{label:s(o)("wechatTemplate"),name:"/channel/wechat/message"},null,8,["label"]),t(m,{label:s(o)("reply"),name:"/channel/wechat/reply"},null,8,["label"])]),_:1},8,["modelValue"]),r("div",null,[t(_,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),style:{"margin-bottom":"30px"}},{default:i(()=>[t(c,{label:"keyword"},{default:i(()=>[d(p(s(o)("keywordReply")),1)]),_:1}),t(c,{label:"default"},{default:i(()=>[d(p(s(o)("defaultReply")),1)]),_:1}),t(c,{label:"subscribe"},{default:i(()=>[d(p(s(o)("subscribeReply")),1)]),_:1})]),_:1},8,["modelValue"]),R(r("div",null,[r("div",me,[t(f,{type:"primary",onClick:z},{default:i(()=>[d("新建回复")]),_:1})]),r("div",ue,[R((B(),J(S,{data:n.data,size:"large"},{empty:i(()=>[r("span",null,p(n.loading?"":s(o)("emptyData")),1)]),default:i(()=>[t(b,{prop:"name",label:"规则名称","min-width":"120"}),t(b,{prop:"keyword",label:"关键字","min-width":"120"}),t(b,{label:"匹配规则","min-width":"150",align:"center"},{default:i(({row:a})=>[d(p(a.matching_type=="full"?"全匹配":"模糊匹配"),1)]),_:1}),t(b,{label:"回复方式","min-width":"150",align:"center"},{default:i(({row:a})=>[d(p(a.reply_method=="all"?"全部回复":"随机回复一条"),1)]),_:1}),t(b,{label:s(o)("operation"),align:"right",fixed:"right",width:"180"},{default:i(({row:a})=>[t(f,{type:"primary",link:"",onClick:M=>K(a)},{default:i(()=>[d(p(s(o)("edit")),1)]),_:2},1032,["onClick"]),t(f,{type:"primary",link:"",onClick:M=>U(a)},{default:i(()=>[d(p(s(o)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[N,n.loading]]),r("div",ce,[t($,{"current-page":n.page,"onUpdate:current-page":e[2]||(e[2]=a=>n.page=a),"page-size":n.limit,"onUpdate:page-size":e[3]||(e[3]=a=>n.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:e[4]||(e[4]=a=>h()),onCurrentChange:h},null,8,["current-page","page-size","total"])])])],512),[[C,u.value=="keyword"]]),R(r("div",null,[t(D,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=a=>g.value=a),ref_key:"defaultReplyRef",ref:V},null,8,["modelValue"]),r("div",ye,[t(f,{type:"primary",loading:l.loading,onClick:e[6]||(e[6]=a=>T())},{default:i(()=>[d(p(s(o)("save")),1)]),_:1},8,["loading"])])],512),[[C,u.value=="default"]]),R(r("div",null,[t(D,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=a=>v.value=a),ref_key:"subscribeReplyRef",ref:E},null,8,["modelValue"]),r("div",_e,[t(f,{type:"primary",loading:l.loading,onClick:e[8]||(e[8]=a=>T())},{default:i(()=>[d(p(s(o)("save")),1)]),_:1},8,["loading"])])],512),[[C,u.value=="subscribe"]])])]),_:1})])}}});export{st as default};
