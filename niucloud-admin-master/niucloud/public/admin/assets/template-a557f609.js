import{d as A,v as $,f as j,l as M,r as x,h as u,c as v,e as t,w as o,a as _,t as p,u as e,i as b,k as a,J as I,m as C,B as R,F as U,T as z,aD as J,E as O,ac as P,ad as W,a5 as G,aC as H,a6 as K,L as Q,M as X,_ as Y}from"./index-9f163f98.js";/* empty css                   *//* empty css                *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     */import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-b29ac1a4.js";/* empty css                        *//* empty css               *//* empty css                    *//* empty css                  */import{p as ee,q as ae}from"./wechat-cc27ccf3.js";import{e as te}from"./notice-730edd18.js";const ne={class:"main-container"},le={class:"flex justify-between items-center"},oe={class:"text-page-title"},se={class:"flex items-center"},ce={class:"mr-[5px]"},ie=A({__name:"template",setup(re){const E=$(),T=j(),N=E.meta.title,c=M({loading:!0,data:[]}),f=x("/channel/wechat/message"),B=s=>{T.push({path:f.value})},g=(s=1)=>{c.loading=!0,ee().then(l=>{c.loading=!1;let d=[];l.data.forEach(i=>{if(i.notice.length){const m=[];Object.keys(i.notice).forEach((r,k)=>{const h=i.notice[r];h.addon_name=i.title,m.push(h)}),m.length&&(m[0].rowspan=m.length,d=d.concat(m))}}),c.data=d}).catch(l=>{c.loading=!1})};g();const V=s=>{if(s.columnIndex===0)return s.row.rowspan?{rowspan:s.row.rowspan,colspan:1}:{rowspan:0,colspan:0}},y=(s=null)=>{const l=J.service({lock:!0,background:"rgba(0, 0, 0, 0)"});ae({keys:s?[s.key]:[]}).then(()=>{g(),l.close()}).catch(()=>{l.close()})},D=s=>{const l=x({key:"",type:"",status:0});l.value.status=s.is_wechat?0:1,l.value.key=s.key,l.value.type="wechat",c.loading=!0,te(l.value).then(d=>{g()}).catch(()=>{c.loading=!1})};return(s,l)=>{const d=O,i=P,m=W,r=G,k=Z,h=H,L=K,F=Q,S=X;return u(),v("div",ne,[t(F,{class:"card !border-none",shadow:"never"},{default:o(()=>[_("div",le,[_("span",oe,p(e(N)),1),t(d,{type:"primary",class:"w-[100px]",onClick:l[0]||(l[0]=n=>y())},{default:o(()=>[b(p(e(a)("batchAcquisition")),1)]),_:1})]),t(m,{modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=n=>f.value=n),class:"my-[20px]",onTabChange:B},{default:o(()=>[t(i,{label:e(a)("wechatAccessFlow"),name:"/channel/wechat"},null,8,["label"]),t(i,{label:e(a)("customMenu"),name:"/channel/wechat/menu"},null,8,["label"]),t(i,{label:e(a)("wechatTemplate"),name:"/channel/wechat/message"},null,8,["label"]),t(i,{label:e(a)("reply"),name:"/channel/wechat/reply"},null,8,["label"])]),_:1},8,["modelValue"]),I((u(),C(L,{data:c.data,"span-method":V,size:"large"},{empty:o(()=>[_("span",null,p(c.loading?"":e(a)("emptyData")),1)]),default:o(()=>[t(r,{prop:"addon_name",label:e(a)("addon"),"min-width":"120"},null,8,["label"]),t(r,{prop:"name","show-overflow-tooltip":!0,label:e(a)("name"),"min-width":"150"},{default:o(({row:n})=>[_("div",se,[_("span",ce,p(n.name),1),n.wechat.tips?(u(),C(h,{key:0,content:n.wechat.tips,placement:"top"},{default:o(()=>[t(k,{name:"element WarningFilled"})]),_:2},1032,["content"])):R("",!0)])]),_:1},8,["label"]),t(r,{label:e(a)("messageType"),"min-width":"100",align:"center"},{default:o(({row:n})=>[_("span",null,p(n.message_type==1?e(a)("buyerNews"):e(a)("sellerMessage")),1)]),_:1},8,["label"]),t(r,{label:e(a)("isStart"),"min-width":"100",align:"center"},{default:o(({row:n})=>[b(p(n.is_wechat==1?e(a)("startUsing"):e(a)("statusDeactivate")),1)]),_:1},8,["label"]),t(r,{label:e(a)("response"),"min-width":"180"},{default:o(({row:n})=>[(u(!0),v(U,null,z(n.wechat.content,(w,q)=>(u(),v("div",{key:"a"+q,class:"text-left"},p(w.join("ï¼š")),1))),128))]),_:1},8,["label"]),t(r,{prop:"wechat_template_id",label:e(a)("serialNumber"),"min-width":"140"},null,8,["label"]),t(r,{label:e(a)("operation"),fixed:"right",align:"right",width:"200"},{default:o(({row:n})=>[t(d,{type:"primary",link:"",onClick:w=>D(n)},{default:o(()=>[b(p(n.is_wechat==1?e(a)("close"):e(a)("open")),1)]),_:2},1032,["onClick"]),t(d,{type:"primary",link:"",onClick:w=>y(n)},{default:o(()=>[b(p(e(a)("regain")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[S,c.loading]])]),_:1})])}}});const Ee=Y(ie,[["__scopeId","data-v-9d3fc6e2"]]);export{Ee as default};
