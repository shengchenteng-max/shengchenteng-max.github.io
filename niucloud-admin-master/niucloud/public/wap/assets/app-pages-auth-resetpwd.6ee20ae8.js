import{d as e,H as r,m as l,q as o,r as a,s as t,t as s,o as d,c as p,w as i,b as u,y as n,z as m,e as c,g as f,n as b,a5 as x,a as g,k as _,i as h,j as v,G as w,R as y}from"./index-837da579.js";import{_ as P}from"./u-input.3e4051bb.js";import{_ as V,a as j}from"./u-form.e65c84d2.js";import{_ as F}from"./sms-code.vue_vue_type_script_setup_true_lang.58597cb1.js";import{_ as k}from"./u-icon.963870f0.js";import{t as C}from"./topTabbar.ede9ed93.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.030b2c5d.js";import"./u-modal.d26bb06e.js";import"./u-loading-icon.57b9bf82.js";import"./u-popup.80b537cf.js";import"./u-transition.38ad69d8.js";const T=z(e({__name:"resetpwd",setup(e){const z=r();C().setTopTabbarParam({title:"",topStatusBar:{bgColor:"#fff",textColor:"#333"}}),l((()=>Object.keys(z.menuButtonInfo).length?y(Number(z.menuButtonInfo.height))+y(z.menuButtonInfo.top)+y(8)+"rpx":"auto"));const T=o({mobile:"",mobile_code:"",mobile_key:"",password:"",confirm_password:""}),q=a(!0);t((()=>{setTimeout((()=>{q.value=!1}),800)}));const S=a(!1),U=a(null),B=a(!0),I=a(!0),E=()=>{B.value=!B.value},R=()=>{I.value=!I.value},G={password:{type:"string",required:!0,message:s("passwordPlaceholder"),trigger:["blur","change"]},confirm_password:[{type:"string",required:!0,message:s("confirmPasswordPlaceholder"),trigger:["blur","change"]},{validator:(e,r)=>r==T.password,message:s("confirmPasswordError"),trigger:["change","blur"]}],mobile:[{type:"string",required:!0,message:s("mobilePlaceholder"),trigger:["blur","change"]},{validator:(e,r)=>uni.$u.test.mobile(r),message:s("mobileError"),trigger:["change","blur"]}],mobile_code:{type:"string",required:!0,message:s("codePlaceholder"),trigger:["blur","change"]}},H=()=>{U.value.validate().then((()=>{S.value||(S.value=!0,x(T).then((e=>{g({url:"/app/pages/auth/login",mode:"redirectTo"})})).catch((()=>{S.value=!1})))}))};return(e,r)=>{const l=_,o=h(v("u-input"),P),a=h(v("u-form-item"),V),t=h(v("sms-code"),F),x=h(v("u-icon"),k),g=h(v("u-form"),j),y=w;return d(),p(l,{class:"w-screen h-screen flex flex-col",style:b(e.themeColor())},{default:i((()=>[u(l,{class:"mx-[60rpx]"},{default:i((()=>[u(l,{class:"pt-[140rpx] text-[44rpx] font-500 text-[#333]"},{default:i((()=>[n(m(c(s)("findPassword")),1)])),_:1}),u(l,{class:"text-[26rpx] leading-[39rpx] text-[var(--text-color-light6)] mt-[24rpx] mb-[90rpx]"},{default:i((()=>[n(m(c(s)("findPasswordTip")),1)])),_:1}),u(g,{labelPosition:"left",model:T,errorType:"toast",rules:G,ref_key:"formRef",ref:U},{default:i((()=>[u(l,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6]"},{default:i((()=>[u(a,{label:"",prop:"mobile","border-bottom":!1},{default:i((()=>[u(o,{modelValue:T.mobile,"onUpdate:modelValue":r[0]||(r[0]=e=>T.mobile=e),type:"number",maxlength:"11",border:"none",placeholder:c(s)("mobilePlaceholder"),class:"!bg-transparent",disabled:q.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},null,8,["modelValue","placeholder","disabled"])])),_:1})])),_:1}),u(l,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6] mt-[40rpx]"},{default:i((()=>[u(a,{label:"",prop:"code","border-bottom":!1},{default:i((()=>[u(o,{modelValue:T.mobile_code,"onUpdate:modelValue":r[2]||(r[2]=e=>T.mobile_code=e),type:"number",maxlength:"4",border:"none",placeholder:c(s)("codePlaceholder"),class:"!bg-transparent",disabled:q.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},{suffix:i((()=>[u(t,{mobile:T.mobile,type:"find_pass",modelValue:T.mobile_key,"onUpdate:modelValue":r[1]||(r[1]=e=>T.mobile_key=e)},null,8,["mobile","modelValue"])])),_:1},8,["modelValue","placeholder","disabled"])])),_:1})])),_:1}),u(l,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6] mt-[40rpx]"},{default:i((()=>[u(a,{label:"",prop:"password","border-bottom":!1},{default:i((()=>[u(o,{modelValue:T.password,"onUpdate:modelValue":r[3]||(r[3]=e=>T.password=e),border:"none",password:B.value,maxlength:"40",placeholder:c(s)("passwordPlaceholder"),class:"!bg-transparent",disabled:q.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},{suffix:i((()=>[T.password?(d(),p(l,{key:0,onClick:E},{default:i((()=>[u(x,{name:B.value?"eye-off":"eye-fill",color:"#b9b9b9",size:"20"},null,8,["name"])])),_:1})):f("v-if",!0)])),_:1},8,["modelValue","password","placeholder","disabled"])])),_:1})])),_:1}),u(l,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6] mt-[40rpx]"},{default:i((()=>[u(a,{label:"",prop:"confirm_password","border-bottom":!1},{default:i((()=>[u(o,{modelValue:T.confirm_password,"onUpdate:modelValue":r[4]||(r[4]=e=>T.confirm_password=e),border:"none",password:I.value,maxlength:"40",placeholder:c(s)("confirmPasswordPlaceholder"),class:"!bg-transparent",disabled:q.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},{suffix:i((()=>[T.confirm_password?(d(),p(l,{key:0,onClick:R},{default:i((()=>[u(x,{name:I.value?"eye-off":"eye-fill",color:"#b9b9b9",size:"20"},null,8,["name"])])),_:1})):f("v-if",!0)])),_:1},8,["modelValue","password","placeholder","disabled"])])),_:1})])),_:1})])),_:1},8,["model"]),u(l,{class:"mt-[160rpx]"},{default:i((()=>[u(y,{class:"w-full h-[80rpx] !bg-[var(--primary-color)] text-[26rpx] rounded-[40rpx] leading-[80rpx] font-500 !text-[#fff]",onClick:H},{default:i((()=>[n(m(c(s)("confirm")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["style"])}}}),[["__scopeId","data-v-7bfd9d10"]]);export{T as default};
