import{d as I,r as p,l as F,X as M,k as t,h as g,m as b,w as n,a as $,e as o,i as V,t as k,u as d,J as h,D as R,G as j,b6 as q,H as O,E as S,S as T,M as G}from"./index-9f163f98.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                        *//* empty css                 */import H from"./index-b01212c8.js";import{_ as J}from"./web-link.vue_vue_type_style_index_0_lang-e4df6a3b.js";import"./el-form-item-4ed993c7.js";import{a as K,b as L,c as X}from"./web-6ff8c968.js";const z={class:"dialog-footer"},ie=I({__name:"adv-edit",emits:["complete"],setup(Q,{expose:w,emit:y}){const u=p(!1),i=p(!1),_={adv_key:"",ap_name:"",adv_id:"",adv_title:"",adv_url:{name:""},adv_image:"",sort:"",background:""},a=F({..._}),v=p(),E={number:/^\d{0,10}$/},N=M(()=>({adv_title:[{required:!0,message:t("advNamePlaceholder"),trigger:"blur"}],adv_image:[{required:!0,message:t("advImagePlaceholder"),trigger:"blur"}],sort:[{trigger:"blur",validator:(s,e,r)=>{isNaN(e)||!E.number.test(e)?r(new Error(t("sortTips"))):r()}}]})),x=async s=>{if(i.value||!s)return;const e=a.adv_id?K:L;await s.validate(async r=>{r&&(i.value=!0,e(a).then(f=>{i.value=!1,u.value=!1,y("complete")}).catch(()=>{i.value=!1}))})},D=async(s=null)=>{if(Object.assign(a,_),i.value=!0,s.adv_id){const e=await(await X(s.adv_id)).data;e&&Object.keys(a).forEach(r=>{e[r]!=null&&(a[r]=e[r])})}else a.adv_key=s.adv_key,a.ap_name=s.ap_name;i.value=!1};return p([]),w({showDialog:u,setFormData:D}),(s,e)=>{const r=R,m=j,f=J,U=H,P=q,A=O,c=S,B=T,C=G;return g(),b(B,{modelValue:u.value,"onUpdate:modelValue":e[10]||(e[10]=l=>u.value=l),title:a.adv_id?d(t)("updateAdv"):d(t)("addAdv"),width:"30%",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:n(()=>[$("span",z,[o(c,{onClick:e[8]||(e[8]=l=>u.value=!1)},{default:n(()=>[V(k(d(t)("cancel")),1)]),_:1}),o(c,{type:"primary",loading:i.value,onClick:e[9]||(e[9]=l=>x(v.value))},{default:n(()=>[V(k(d(t)("confirm")),1)]),_:1},8,["loading"])])]),default:n(()=>[h((g(),b(A,{model:a,"label-width":"120px",ref_key:"formRef",ref:v,rules:d(N),class:"page-form"},{default:n(()=>[o(m,{label:d(t)("advName"),prop:"adv_title"},{default:n(()=>[o(r,{modelValue:a.adv_title,"onUpdate:modelValue":e[0]||(e[0]=l=>a.adv_title=l),modelModifiers:{trim:!0},clearable:"",placeholder:d(t)("advNamePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(m,{label:d(t)("advPosition"),prop:"ap_name"},{default:n(()=>[o(r,{modelValue:a.ap_name,"onUpdate:modelValue":e[1]||(e[1]=l=>a.ap_name=l),modelModifiers:{trim:!0},disabled:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),o(m,{label:d(t)("advUrl")},{default:n(()=>[o(f,{modelValue:a.adv_url,"onUpdate:modelValue":e[2]||(e[2]=l=>a.adv_url=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(m,{label:d(t)("advImg"),prop:"adv_image"},{default:n(()=>[o(U,{modelValue:a.adv_image,"onUpdate:modelValue":e[3]||(e[3]=l=>a.adv_image=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(m,{label:d(t)("background")},{default:n(()=>[o(P,{modelValue:a.background,"onUpdate:modelValue":e[4]||(e[4]=l=>a.background=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(m,{label:d(t)("sort"),prop:"sort"},{default:n(()=>[o(r,{modelValue:a.sort,"onUpdate:modelValue":e[5]||(e[5]=l=>a.sort=l),modelModifiers:{trim:!0},clearable:"",placeholder:d(t)("sortPlaceholder"),class:"input-width","show-word-limit":"",maxlength:"8",onKeyup:e[6]||(e[6]=l=>s.filterNumber(l)),onBlur:e[7]||(e[7]=l=>a.sort=l.target.value)},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[C,i.value]])]),_:1},8,["modelValue","title"])}}});export{ie as _};
