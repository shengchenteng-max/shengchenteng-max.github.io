import{d as $,l as k,r as s,ax as I,al as O,Y as C,k as t,h as c,c as f,e as l,w as i,a,t as r,u as o,i as R,B as E,m as z,z as V,ac as M,ad as H,C as Y,E as q,D as A,S as G}from"./index-9f163f98.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                    */import{b as J}from"./browser-a1ac24ac.js";import{r as K}from"./sys-135535fa.js";import{b as W}from"./diy_form-8a6dfb58.js";const X={key:0,class:"promote-flex flex"},Z={class:"promote-img flex justify-center items-center bg-[#f8f8f8] w-[150px] h-[150px]"},ee={class:"px-[20px] flex-1"},te={class:"mb-[10px]"},oe=["href"],ae={key:1,class:"promote-flex flex"},se={class:"promote-img flex justify-center items-center bg-[#f8f8f8] w-[150px] h-[150px]"},le={class:"w-[150px] h-[150px] text-[14px] text-center leading-[150px]"},ne={key:1,class:"w-[150px] h-[150px] text-[14px] text-center leading-[150px]"},re={class:"px-[20px] flex-1"},pe=["href"],ce=$({__name:"form-spread-popup",setup(ie,{expose:D}){const x=k({}),d=s(!1),p=s("h5"),h=s("");s("");const v=s(""),m=s(""),g=s(""),_=k({path:""});K().then(e=>{h.value=e.data.wap_url});const S=()=>{m.value=`${h.value}${g.value}`,J.toDataURL(m.value,{errorCorrectionLevel:"L",margin:0,width:120}).then(e=>{v.value=e})},B=e=>{p.value="h5",Object.assign(x,e),g.value=`/app/pages/index/diy_form?form_id=${x.form_id}`,S(),U(),d.value=!0},U=()=>{W({form_id:x.form_id}).then(e=>{e.data&&(_.path=e.data.path)})},{copy:j,isSupported:F,copied:w}=I(),L=e=>{F.value||C({message:t("notSupportCopy"),type:"warning"}),j(e)};return O(w,()=>{w.value&&C({message:t("copySuccess"),type:"success"})}),D({showDialog:d,show:B}),(e,n)=>{const y=M,Q=H,b=Y,N=q,P=A,T=G;return c(),f("div",null,[l(T,{modelValue:d.value,"onUpdate:modelValue":n[2]||(n[2]=u=>d.value=u),title:o(t)("formPromotion"),width:"500px","destroy-on-close":!0},{default:i(()=>[l(Q,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=u=>p.value=u),class:"mb-[10px]"},{default:i(()=>[l(y,{label:"H5",name:"h5"}),l(y,{label:"微信小程序",name:"weapp"})]),_:1},8,["modelValue"]),p.value=="h5"?(c(),f("div",X,[a("div",Z,[l(b,{src:v.value},null,8,["src"])]),a("div",ee,[a("div",te,r(o(t)("promoteUrl")),1),l(P,{class:"mb-[10px]",readonly:"",value:m.value},{append:i(()=>[l(N,{onClick:n[1]||(n[1]=u=>L(m.value))},{default:i(()=>[R(r(o(t)("copy")),1)]),_:1})]),_:1},8,["value"]),a("a",{class:"text-primary",href:v.value,download:""},r(o(t)("downLoadQRCode")),9,oe)])])):E("",!0),p.value=="weapp"?(c(),f("div",ae,[a("div",se,[_.path?(c(),z(b,{key:0,src:o(V)(_.path),class:"w-[150px] h-[150px]"},{error:i(()=>[a("div",le,r(o(t)("configureFailed")),1)]),_:1},8,["src"])):(c(),f("div",ne,r(o(t)("configureFailed")),1))]),a("div",re,[a("a",{class:"text-primary",href:o(V)(_.path),target:"_blank",download:""},r(o(t)("downLoadQRCode")),9,pe)])])):E("",!0)]),_:1},8,["modelValue","title"])])}}}),be=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));export{be as _};
