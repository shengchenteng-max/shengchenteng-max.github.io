import{d as L,r as _,l as N,X as T,k as a,h as g,m as v,w as n,a as B,e as r,i as b,t as w,u as i,J as C,G as S,D as j,aA as q,H as I,E as R,S as $,M}from"./index-9f163f98.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                  *//* empty css                 */import"./el-form-item-4ed993c7.js";import O from"./index-b01212c8.js";import{i as A,j as G,k as H}from"./web-6ff8c968.js";const J={class:"dialog-footer"},re=L({__name:"friendly-link-edit",emits:["complete"],setup(K,{expose:V,emit:y}){const m=_(!1),d=_(!1),f={id:"",link_pic:"",link_title:"",link_url:"",sort:"",is_show:1},l=N({...f}),c=_(),h={number:/^\d{0,10}$/},E=T(()=>({link_pic:[{required:!0,message:a("linkPicPlaceholder"),trigger:"blur"}],link_title:[{required:!0,message:a("linkTitlePlaceholder"),trigger:"blur"}],link_url:[{required:!0,message:a("linkUrlPlaceholder"),trigger:"blur"},{validator:(s,e,o)=>{e&&!/^(http|https):\/\/.+/.test(e)?o(new Error(a("addressTips"))):o()}}],sort:[{trigger:"blur",validator:(s,e,o)=>{isNaN(e)||!h.number.test(e)?o(new Error(a("sortTips"))):o()}}]})),F=async s=>{if(d.value||!s)return;const e=l.id?A:G;await s.validate(async o=>{o&&(d.value=!0,e(l).then(p=>{d.value=!1,m.value=!1,y("complete")}).catch(()=>{d.value=!1}))})};return V({showDialog:m,setFormData:async(s=null)=>{if(Object.assign(l,f),d.value=!0,s){const e=await(await H(s.id)).data;e&&Object.keys(l).forEach(o=>{e[o]!=null&&(l[o]=e[o])})}d.value=!1}}),(s,e)=>{const o=O,u=S,p=j,x=q,D=I,k=R,U=$,P=M;return g(),v(U,{modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=t=>m.value=t),title:l.id?i(a)("updateFriendlyLink"):i(a)("addFriendlyLink"),width:"500px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:n(()=>[B("span",J,[r(k,{onClick:e[7]||(e[7]=t=>m.value=!1)},{default:n(()=>[b(w(i(a)("cancel")),1)]),_:1}),r(k,{type:"primary",loading:d.value,onClick:e[8]||(e[8]=t=>F(c.value))},{default:n(()=>[b(w(i(a)("confirm")),1)]),_:1},8,["loading"])])]),default:n(()=>[C((g(),v(D,{model:l,"label-width":"120px",ref_key:"formRef",ref:c,rules:i(E),class:"page-form"},{default:n(()=>[r(u,{label:i(a)("linkPic")},{default:n(()=>[r(o,{modelValue:l.link_pic,"onUpdate:modelValue":e[0]||(e[0]=t=>l.link_pic=t)},null,8,["modelValue"])]),_:1},8,["label"]),r(u,{label:i(a)("linkTitle"),prop:"link_title"},{default:n(()=>[r(p,{modelValue:l.link_title,"onUpdate:modelValue":e[1]||(e[1]=t=>l.link_title=t),clearable:"",placeholder:i(a)("linkTitlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:i(a)("linkUrl"),prop:"link_url"},{default:n(()=>[r(p,{modelValue:l.link_url,"onUpdate:modelValue":e[2]||(e[2]=t=>l.link_url=t),clearable:"",placeholder:i(a)("linkUrlPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:i(a)("sort"),prop:"sort"},{default:n(()=>[r(p,{modelValue:l.sort,"onUpdate:modelValue":e[3]||(e[3]=t=>l.sort=t),modelModifiers:{trim:!0},clearable:"",placeholder:i(a)("sortPlaceholder"),class:"input-width","show-word-limit":"",maxlength:"8",onKeyup:e[4]||(e[4]=t=>s.filterNumber(t)),onBlur:e[5]||(e[5]=t=>l.sort=t.target.value)},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:i(a)("isShow")},{default:n(()=>[r(x,{modelValue:l.is_show,"onUpdate:modelValue":e[6]||(e[6]=t=>l.is_show=t),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[P,d.value]])]),_:1},8,["modelValue","title"])}}});export{re as _};
