import{d as P,v as z,l as N,r as b,h as v,c as U,e as a,w as n,a as _,t as d,u as o,i as p,k as t,J as M,m as S,a4 as j,ao as I,Y as R,E as q,D as G,G as H,H as J,L as Y,a5 as A,a6 as K,a7 as O,M as Q}from"./index-9f163f98.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  */import{o as W,p as X,q as Z}from"./web-6ff8c968.js";import{_ as ee}from"./friendly-link-edit.vue_vue_type_style_index_0_lang-7cf4965d.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./index-b01212c8.js";/* empty css                        */import"./index.vue_vue_type_style_index_0_lang-eb3f7737.js";import"./attachment-d1610ab5.js";import"./index.vue_vue_type_script_setup_true_lang-761ba1b4.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                         */import"./index.vue_vue_type_script_setup_true_lang-e32ef5b5.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-b29ac1a4.js";import"./sys-135535fa.js";import"./sortable.esm-be94e56d.js";const te={class:"main-container"},ae={class:"flex justify-between items-center"},le={class:"text-lg"},ie={class:"mt-[10px]"},oe={class:"mt-[16px] flex justify-end"},Je=P({__name:"friendly_link",setup(ne){const x=z().meta.title,e=N({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{link_title:""}}),g=b(),s=(r=1)=>{e.loading=!0,e.page=r,W({page:e.page,limit:e.limit,...e.searchParam}).then(l=>{e.loading=!1,e.data=l.data.data,e.total=l.data.total}).catch(()=>{e.loading=!1})};s();const c=b(null),w=()=>{c.value.setFormData(),c.value.showDialog=!0},C=r=>{c.value.setFormData(r),c.value.showDialog=!0},E=r=>{j.confirm(t("friendlyLinkDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{X(r).then(()=>{s()}).catch(()=>{})})},F={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},L=I((r,l)=>{if(isNaN(r)||!F.number.test(r)){R({type:"warning",message:`${t("sortTips")}`});return}r>99999999&&(l.sort=99999999),Z({id:l.id,sort:r}).then(m=>{s()})}),D=r=>{r&&(r.resetFields(),s())};return(r,l)=>{const m=q,k=G,h=H,T=J,y=Y,u=A,B=K,V=O,$=Q;return v(),U("div",te,[a(y,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[_("div",ae,[_("span",le,d(o(x)),1),a(m,{type:"primary",onClick:w},{default:n(()=>[p(d(o(t)("addFriendlyLink")),1)]),_:1})]),a(y,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[a(T,{inline:!0,model:e.searchParam,ref_key:"searchFormRef",ref:g},{default:n(()=>[a(h,{label:o(t)("linkTitle"),prop:"link_title"},{default:n(()=>[a(k,{modelValue:e.searchParam.link_title,"onUpdate:modelValue":l[0]||(l[0]=i=>e.searchParam.link_title=i),placeholder:o(t)("linkTitlePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(h,null,{default:n(()=>[a(m,{type:"primary",onClick:l[1]||(l[1]=i=>s())},{default:n(()=>[p(d(o(t)("search")),1)]),_:1}),a(m,{onClick:l[2]||(l[2]=i=>D(g.value))},{default:n(()=>[p(d(o(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),_("div",ie,[M((v(),S(B,{data:e.data,size:"large"},{empty:n(()=>[_("span",null,d(e.loading?"":o(t)("emptyData")),1)]),default:n(()=>[a(u,{prop:"link_title",label:o(t)("linkTitle"),"min-width":"120"},null,8,["label"]),a(u,{prop:"link_url",label:o(t)("linkUrl"),"min-width":"200"},null,8,["label"]),a(u,{prop:"sort",label:o(t)("sort"),"min-width":"120"},{default:n(({row:i})=>[a(k,{modelValue:i.sort,"onUpdate:modelValue":f=>i.sort=f,modelModifiers:{trim:!0},class:"!w-[70px]",maxlength:"8",onBlur:f=>o(L)(i.sort,i)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),a(u,{label:o(t)("isShow"),"min-width":"180",align:"center"},{default:n(({row:i})=>[p(d(i.is_show==1?o(t)("show"):o(t)("hidden")),1)]),_:1},8,["label"]),a(u,{label:o(t)("operation"),fixed:"right","min-width":"120",align:"right"},{default:n(({row:i})=>[a(m,{type:"primary",link:"",onClick:f=>C(i)},{default:n(()=>[p(d(o(t)("edit")),1)]),_:2},1032,["onClick"]),a(m,{type:"primary",link:"",onClick:f=>E(i.id)},{default:n(()=>[p(d(o(t)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[$,e.loading]]),_("div",oe,[a(V,{"current-page":e.page,"onUpdate:current-page":l[3]||(l[3]=i=>e.page=i),"page-size":e.limit,"onUpdate:page-size":l[4]||(l[4]=i=>e.limit=i),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:l[5]||(l[5]=i=>s()),onCurrentChange:s},null,8,["current-page","page-size","total"])])]),a(ee,{ref_key:"editFriendlyLinkDialog",ref:c,onComplete:s},null,512)]),_:1})])}}});export{Je as default};
