import{_ as y}from"./index.vue_vue_type_style_index_0_lang-eb3f7737.js";import{d as V,r as o,X as k,aQ as b,h as U,c as w,e as r,u as c,aY as D,bd as H,F as x,z as f}from"./index-9f163f98.js";const B=V({__name:"index",props:{modelValue:{type:String,default:""},mode:{type:String,default:"simple"},height:{type:Number,default:600}},emits:["update:modelValue","handleBlur"],setup(g,{emit:l}){const i=g,p=o(),s=o(null),u=o(null),a=k({get(){return i.modelValue},set(e){l("update:modelValue",e)}});let t=null;const d={};d.token=b();const h=o({debug:!1,UEDITOR_HOME_URL:"/admin/ueditor/",UEDITOR_CORS_URL:location.origin+"/admin/ueditor/",serverUrl:"/adminapi/sys/ueditor",serverHeaders:d,autoHeightEnabled:!1,initialFrameHeight:i.height,initialFrameWidth:"100%",wordCount:!0,toolbarCallback:function(e,n){switch(t=n,e){case"insertimage":return s.value.showDialog=!0,!0;case"insertvideo":return u.value.showDialog=!0,!0}}}),_=e=>{e.addListener("blur",()=>{l("handleBlur",e.getContent())}),e.getContentLength,e.getContentLength=function(){return e.getContent().replace(/[\s\u3000]+/g,"").length}},C=e=>{e.forEach(n=>{t==null||t.execCommand("insertHtml",`<img src="${f(n.url)}">`)})},R=e=>{t==null||t.execCommand("insertHtml",`<video src="${f(e.url)}">`)};return(e,n)=>{const m=y;return U(),w(x,null,[r(m,{type:"image",ref_key:"imageRef",ref:s,limit:"",onConfirm:C},null,512),r(m,{type:"video",ref_key:"videoRef",ref:u,onConfirm:R},null,512),r(c(H),{modelValue:c(a),"onUpdate:modelValue":n[0]||(n[0]=v=>D(a)?a.value=v:null),config:h.value,editorDependencies:["ueditor.config.js","ueditor.all.js"],ref_key:"editorRef",ref:p,onReady:_},null,8,["modelValue","config","editorDependencies"])],64)}}});export{B as _};
