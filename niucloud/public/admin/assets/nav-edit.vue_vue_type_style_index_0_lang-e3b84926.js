import{d as F,r as p,l as P,X as T,k as t,h as b,m as w,w as n,a as C,e as s,i as V,t as h,u as r,J as S,bn as $,D as q,G as I,aA as M,H as R,E as j,S as O,M as A}from"./index-9f163f98.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                  */import{_ as G}from"./web-link.vue_vue_type_style_index_0_lang-e4df6a3b.js";import"./el-form-item-4ed993c7.js";/* empty css                 */import{l as H,m as J,n as K}from"./web-6ff8c968.js";const L={class:"dialog-footer"},ne=F({__name:"nav-edit",emits:["complete"],setup(X,{expose:y,emit:E}){const m=p(!1),i=p(!1),v={id:"",nav_title:"",nav_url:{name:""},sort:"",is_blank:1,is_show:1},l=P({...v}),_=p(),N={number:/^\d{0,10}$/},k=T(()=>({nav_title:[{required:!0,message:t("navTitlePlaceholder"),trigger:"blur"}],nav_url:[{required:!0,trigger:"blur",validator:(u,e,o)=>{e.url?o():o(new Error(t("navUrlPlaceholder")))}}],is_blank:[{required:!0,message:t("isBlankPlaceholder"),trigger:"blur"}],sort:[{trigger:"blur",validator:(u,e,o)=>{isNaN(e)||!N.number.test(e)?o(new Error(t("sortTips"))):o()}}]})),x=async u=>{if(i.value||!u)return;const e=l.id?H:J;await u.validate(async o=>{o&&(i.value=!0,e(l).then(f=>{i.value=!1,m.value=!1,E("complete")}).catch(()=>{i.value=!1}))})};return y({showDialog:m,setFormData:async(u=null)=>{if(Object.assign(l,v),i.value=!0,u){const e=await(await K(u.id)).data;e&&Object.keys(l).forEach(o=>{e[o]!=null&&(l[o]=e[o])})}i.value=!1}}),(u,e)=>{const o=q,d=I,f=G,c=M,D=R,g=j,U=O,B=A;return b(),w(U,{modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=a=>m.value=a),title:l.id?r(t)("updateNav"):r(t)("addNav"),width:"500px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:n(()=>[C("span",L,[s(g,{onClick:e[7]||(e[7]=a=>m.value=!1)},{default:n(()=>[V(h(r(t)("cancel")),1)]),_:1}),s(g,{type:"primary",loading:i.value,onClick:e[8]||(e[8]=a=>x(_.value))},{default:n(()=>[V(h(r(t)("confirm")),1)]),_:1},8,["loading"])])]),default:n(()=>[S((b(),w(D,{model:l,"label-width":"120px",ref_key:"formRef",ref:_,rules:r(k),class:"page-form"},{default:n(()=>[s(d,{label:r(t)("navTitle"),prop:"nav_title"},{default:n(()=>[s(o,{modelValue:l.nav_title,"onUpdate:modelValue":e[0]||(e[0]=a=>l.nav_title=a),modelModifiers:{trim:!0},clearable:"",placeholder:r(t)("navTitlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(d,{label:r(t)("navUrl"),prop:"nav_url"},{default:n(()=>[s(f,{modelValue:l.nav_url,"onUpdate:modelValue":e[1]||(e[1]=a=>l.nav_url=a)},null,8,["modelValue"])]),_:1},8,["label"]),s(d,{label:r(t)("sort"),prop:"sort"},{default:n(()=>[s(o,{modelValue:l.sort,"onUpdate:modelValue":e[2]||(e[2]=a=>l.sort=a),modelModifiers:{trim:!0},clearable:"",placeholder:r(t)("sortPlaceholder"),class:"input-width","show-word-limit":"",maxlength:"8",onKeyup:e[3]||(e[3]=a=>r($)(a)),onBlur:e[4]||(e[4]=a=>l.sort=a.target.value)},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(d,{label:r(t)("isBlank")},{default:n(()=>[s(c,{modelValue:l.is_blank,"onUpdate:modelValue":e[5]||(e[5]=a=>l.is_blank=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1},8,["label"]),s(d,{label:r(t)("isShow")},{default:n(()=>[s(c,{modelValue:l.is_show,"onUpdate:modelValue":e[6]||(e[6]=a=>l.is_show=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[B,i.value]])]),_:1},8,["modelValue","title"])}}});export{ne as _};
