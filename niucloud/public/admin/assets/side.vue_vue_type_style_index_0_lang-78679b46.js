import{d as te,bh as se,j as le,r as _,bs as J,as as oe,aG as ce,al as ue,h as o,m,w as c,e as g,a as r,u as i,c as p,T as P,F as B,t as Q,b4 as de,B as X,v as re,f as ie,U as pe,W as he,be as _e,C as me,bZ as fe,bS as ve,a2 as xe,I as ge,y as ke,O as ye}from"./index-9f163f98.js";/* empty css                     *//* empty css                */import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./el-sub-menu-4ed993c7.js";import{_ as we}from"./index.vue_vue_type_script_setup_true_lang-b29ac1a4.js";/* empty css                 *//* empty css                        */import{_ as be}from"./icon-addon-339e16d0.js";import{_ as Ee}from"./menu-item.vue_vue_type_style_index_0_lang-0ff2a33d.js";const Ce={class:"w-[124px] px-[8px] bg-[#282c34] h-screen one-menu"},Me={key:0,class:"logo flex items-center m-auto h-[64px]"},Ie=r("img",{class:"max-h-[40px] max-w-[40px] rounded-full",src:be,alt:""},null,-1),je=[Ie],Re={key:1,class:"logo flex items-center justify-center h-[64px]"},Be=r("i",{class:"text-3xl iconfont iconyunkongjian"},null,-1),Le=[Be],De={key:0,class:"w-[16px] h-[16px] relative flex justify-center"},Ke={key:1,class:"w-[16px] h-[16px]"},Ne={class:"relative flex-1 w-0"},Ve={class:"ml-[10px] w-full truncate"},Ae=r("div",{class:"h-[48px]"},null,-1),Fe={class:"w-[140px] h-[64px] flex items-center justify-center text-[16px] border-b-[1px] border-solid border-[var(--el-border-color-lighter)]"},Oe=r("div",{class:"h-[48px]"},null,-1),Xe=te({__name:"side",setup(Ue){const a=se(),L=le(),n=re(),Y=ie(),S=L.routers,ee=L.addonIndexRoute,f=_([]),l=_([]),k={};if(S.forEach(e=>{e.original_name=e.name,e.meta.addon==""?e.meta.attr==""&&(e.children&&e.children.length&&(e.name=J(e.children)),f.value.push(e)):e.meta.addon!=""&&(a==null?void 0:a.apps.length)==1&&(a==null?void 0:a.apps[0].key)==e.meta.addon?e.children?(e.children.forEach(t=>{t.original_name=t.name,t.children&&t.children.length&&(t.name=J(t.children))}),f.value.unshift(...e.children)):f.value.unshift(e):k[e.meta.addon]=e}),(a==null?void 0:a.apps.length)>1){const e=[];a==null||a.apps.forEach(t=>{k[t.key]&&(k[t.key].name=ee[t.key],e.push(k[t.key]))}),f.value.unshift(...e)}const C=_(null),D=_(null),u=_(n.matched[1].name),ae=async()=>{const e=await pe();C.value=e.data},ne=async()=>{const e=await he();D.value=e.data};oe(async()=>{await ae(),await ne()}),ce(()=>{var w,v,x,b,E,s,h,R,K,N,V,A,F,O,U,$,q,G,H,T,W,Z,z;const e=((x=(v=(w=C.value)==null?void 0:w.addon)==null?void 0:v.list)==null?void 0:x.map(d=>d.key))??[],t=((s=(E=(b=C.value)==null?void 0:b.tool)==null?void 0:E.list)==null?void 0:s.map(d=>d.key))??[],I=[...e,...t],j=((K=(R=(h=D.value)==null?void 0:h.marketing)==null?void 0:R.list)==null?void 0:K.map(d=>d.key))??[],y=(N=n.matched[1])==null?void 0:N.name;if(I.includes(y))u.value="addon",l.value=((V=n.matched[1])==null?void 0:V.children)??[];else if(j.includes(y))u.value="active",l.value=((A=n.matched[1])==null?void 0:A.children)??[];else if(n.meta.attr!=="")u.value=(F=n.matched[2])==null?void 0:F.name,l.value=((O=n.matched[1])==null?void 0:O.children)??[];else if((a==null?void 0:a.apps.length)>1)l.value=(U=n.matched[1])==null?void 0:U.children,u.value=($=n.matched[1])==null?void 0:$.name;else{const d=n.matched[1];d.meta.addon===""?(u.value=(q=n.matched[1])==null?void 0:q.name,l.value=((G=n.matched[1])==null?void 0:G.children)??[]):d.meta.addon===((H=a==null?void 0:a.apps[0])==null?void 0:H.key)?(u.value=(T=n.matched[2])==null?void 0:T.name,l.value=((W=n.matched[2])==null?void 0:W.children)??[]):(u.value=(Z=n.matched[1])==null?void 0:Z.name,l.value=((z=n.matched[1])==null?void 0:z.children)??[])}});const M=_([]);return ue(l.value,()=>{if(M.value=[],l.value&&Object.values(l.value).length){let e=ye(l.value);for(let t in e)M.value.push(e[t].name)}},{immediate:!0}),(e,t)=>{const I=_e,j=me,y=we,w=fe,v=ve,x=xe,b=ge,E=ke;return o(),m(E,{class:"w-100 h-screen"},{default:c(()=>[g(b,{class:"p-0 flex"},{default:c(()=>[r("div",Ce,[g(I,{class:"logo-wrap"},{default:c(()=>[i(a).menuIsCollapse?(o(),p("div",Re,Le)):(o(),p("div",Me,je))]),_:1}),g(x,{class:"h-[calc( 100vh - 64px )]"},{default:c(()=>[g(v,{"default-active":u.value,router:!0,class:"aside-menu","unique-opened":!0,collapse:i(a).menuIsCollapse},{default:c(()=>[(o(!0),p(B,null,P(f.value,(s,h)=>(o(),p(B,{key:h},[s.meta.show?(o(),m(w,{key:0,index:s.original_name,onClick:R=>i(Y).push({name:s.name})},{title:c(()=>[r("div",Ne,[r("span",Ve,Q(s.meta.short_title||s.meta.title),1)])]),default:c(()=>[s.meta.icon?(o(),p("div",De,[i(de)(s.meta.icon)?(o(),m(j,{key:0,class:"w-[16px] h-[16px] rounded-[50%] overflow-hidden",src:s.meta.icon,fit:"fill"},null,8,["src"])):(o(),m(y,{key:1,name:s.meta.icon,class:"absolute top-[50%] -translate-y-[50%]"},null,8,["name"]))])):(o(),p("div",Ke))]),_:2},1032,["index","onClick"])):X("",!0)],64))),128))]),_:1},8,["default-active","collapse"]),Ae]),_:1})]),l.value.length?(o(),m(x,{key:0,class:"two-menu w-[140px]"},{default:c(()=>[r("div",Fe,Q(i(n).matched[1].meta.title),1),g(v,{class:"aside-menu","default-active":i(n).name,"default-openeds":M.value,router:!0,collapse:i(a).menuIsCollapse},{default:c(()=>[(o(!0),p(B,null,P(l.value,(s,h)=>(o(),m(Ee,{routes:s,key:h},null,8,["routes"]))),128))]),_:1},8,["default-active","default-openeds","collapse"]),Oe]),_:1})):X("",!0)]),_:1})]),_:1})}}});export{Xe as _};
