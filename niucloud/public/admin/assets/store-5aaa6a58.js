import{d as Pl,f as Ol,v as Kl,r as c,aB as dl,j as ql,P as Hl,X as cl,al as Ql,l as rl,k as a,N as ge,h as d,c as _,a as n,e,w as l,t as u,u as i,B as h,A as Jl,F as $,T as G,m as g,i as f,J as X,ae,n as Gl,aO as Xl,bu as Yl,bv as Zl,bs as pl,bw as Wl,bx as et,aZ as lt,aa as _l,by as tt,bz as at,a4 as se,bA as st,bB as nt,bC as ot,bD as it,Y as ut,ac as dt,ad as ct,Q as rt,D as pt,a3 as _t,ah as ft,E as vt,a5 as mt,C as ht,ab as xt,aC as gt,a6 as yt,V as kt,bt,R as wt,G as Ct,L as It,H as Tt,S as Vt,at as Et,au as Ut,av as At,aw as Bt,a2 as Dt,a_ as St,M as Ft,p as $t,g as Rt,_ as Lt}from"./index-9f163f98.js";/* empty css                   *//* empty css                  *//* empty css                     *//* empty css               *//* empty css                *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  *//* empty css                   */import{_ as ye}from"./apply_empty-6a5331b2.js";/* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css               *//* empty css                 *//* empty css                        *//* empty css                        *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                  *//* empty css                    */import{_ as Mt}from"./icon-addon-one-638e965c.js";import{T as jt,_ as Nt,b as zt,a as Pt}from"./dark-d503b80a.js";import{d as Ot}from"./tools-3c2d984d.js";import{g as fl,d as Kt,s as qt}from"./module-29351851.js";import Ht from"./index-8ef97a8d.js";import Qt from"./index-a8b2df8a.js";import Jt from"./index-ecb691b7.js";/* empty css                 */import"./upgrade-e1e2708e.js";/* empty css                         *//* empty css                         *//* empty css                   */const T=ne=>($t("data-v-0e2fc76e"),ne=ne(),Rt(),ne),Gt={class:"main-container"},Xt={class:"flex justify-between items-center"},Yt={class:"text-page-title"},Zt={class:"custom-tabs-label"},Wt={key:0,class:"w-[15px] h-[15px] bg-[#DA203E] absolute text-[#fff] text-[11px] flex items-center justify-center rounded-full top-[3px] right-[-12px]"},ea={class:"flex justify-between my-[10px]"},la={class:"flex items-center search-form"},ta={class:"relative"},aa=T(()=>n("span",{style:{opacity:"0"}},".",-1)),sa=[aa],na={class:"flex items-center cursor-pointer relative left-[-10px]"},oa=T(()=>n("div",{class:"flex items-center w-full h-full"},[n("img",{class:"max-w-full max-h-full",src:Mt,alt:""})],-1)),ia={class:"flex-1 w-0 flex flex-col justify-center pl-[20px] font-500 text-[13px]"},ua={class:"w-[236px] truncate leading-[18px]"},da={key:0,class:"w-[236px] truncate leading-[18px] mt-[6px]"},ca={key:1,class:"w-[236px] truncate leading-[18px] mt-[6px]"},ra={class:"mt-[3px] flex flex-nowrap"},pa={class:"flex items-center"},_a={class:"font-500 text-[13px] mr-[5px]"},fa={class:"font-500 text-[13px]"},va={class:"font-500 text-[13px] multi-hidden"},ma={class:"font-500 text-[13px] multi-hidden"},ha={class:"font-500 text-[13px]"},xa={key:1,class:"data-loading"},ga=T(()=>n("span",null,null,-1)),ya={key:0,class:"h-[100px]"},ka=T(()=>n("div",{class:"w-[230px] mx-auto"},[n("img",{src:ye,class:"max-w-full",alt:""})],-1)),ba={class:"flex items-center"},wa=T(()=>n("div",{class:"w-[230px] mx-auto"},[n("img",{src:ye,class:"max-w-full",alt:""})],-1)),Ca={class:"flex items-center"},Ia={key:4,class:"mx-auto overview-empty flex flex-col items-center pt-14 pb-6"},Ta=T(()=>n("div",{class:"mb-[20px] text-sm text-[#888]"},"检测到当前账号尚未绑定授权，请先绑定授权！",-1)),Va={class:"flex flex-1 flex-wrap justify-center relative"},Ea={class:"px-[18px] py-[8px]"},Ua=T(()=>n("p",{class:"leading-[32px] text-[14px]"},"您在官方应用市场购买任意一款应用，即可获得授权码。输入正确授权码认证通过后，即可支持在线升级和其它相关服务",-1)),Aa={class:"flex justify-end mt-[36px]"},Ba=T(()=>n("div",{class:"w-[230px] mx-auto"},[n("img",{src:ye,class:"max-w-full",alt:""})],-1)),Da={class:"flex items-center"},Sa=T(()=>n("div",{class:"w-[230px] mx-auto"},[n("img",{src:ye,class:"max-w-full",alt:""})],-1)),Fa={class:"flex items-center"},$a={class:"mt-[20px]"},Ra={class:"text-sm mt-[10px] text-info"},La={class:"mt-[20px]"},Ma={class:"mt-[10px] text-right"},ja={class:"input-width"},Na={class:"input-width"},za={class:"input-width"},Pa={class:"input-width"},Oa={class:"dialog-footer"},Ka={class:"min-h-[150px]"},qa={key:0,class:"my-3"},Ha={class:"pt-[20px] pl-[20px]"},Qa={class:"flex items-center"},Ja=T(()=>n("span",{class:"ml-[5px] leading-[20px]"},"编译权限错误，查看解决方案",-1)),Ga=T(()=>n("div",{class:"border-[1px] border-primary rounded-[3px] w-[72px] h-[26px] leading-[25px] text-center"},"立即查看",-1)),Xa={class:"px-[20px] pt-[10px] text-[14px]"},Ya={key:0},Za={key:1},Wa={key:0,class:"text-right"},es={key:1},ls={class:"flex justify-end"},ts={class:"w-[400px]"},as={class:"w-[400px]"},ss={class:"h-[50vh] mt-[20px]"},ns={class:"h-[50vh] mt-[20px] flex flex-col"},os=T(()=>n("img",{src:zt,alt:""},null,-1)),is={class:"text-[16px] text-[#4F516D] mt-[5px]"},us={key:0,class:"text-[16px] text-[#9699B6] mt-[10px]"},ds={class:"mt-[20px]"},cs={class:"h-[50vh] mt-[20px] flex flex-col"},rs=T(()=>n("img",{src:Pt,alt:""},null,-1)),ps={class:"min-h-[150px]"},_s={key:0,class:"bg-[#fff] my-3"},fs={class:"pt-[20px] pl-[20px]"},vs={class:"px-[20px] pt-[10px] text-[14px]"},ms={key:0},hs={key:1},xs={key:0},gs={key:1},ys=T(()=>n("span",null,"本地已经存在该插件/应用，再次下载会覆盖该插件/应用。",-1)),ks={class:"dialog-footer"},bs=Pl({__name:"store",setup(ne){Ol();const Fe=Kl(),vl=c(Date.now()),b=c(dl.get("storeActiveName")||"installed"),ke=c(null),oe=c(null),C=c(!0),j=c(""),be=c([]),ie=ql(),Y=c(!1),R=c(null),ue=c(""),$e=c(null);Hl().then(o=>{ue.value=o.data.version.version});const Re=c({});(()=>{Yl().then(o=>{Re.value=o.data.type_list})})();const Le=c(),ml=()=>{je(Le.value,!0)},Me=o=>{b.value=o,dl.set({key:"storeActiveName",data:o})};Fe.query.id&&Me(Fe.query.id);const je=(o,t=!1)=>{if(o.is_download&&b.value=="all"&&!t)return Y.value=!0,Le.value=o,!1;j.value||(j.value=o.key,Kt({addon:o.key,version:o.version}).then(()=>{Y.value=!1,Pe(o.key),L(),j.value=""}).catch(()=>{j.value=""}))},we=c("");fl().then(o=>{o.data.data&&o.data.data.auth_code&&(we.value=o.data.data.auth_code)});const Ce=c(""),Ie=c(""),U=c({installed:[],uninstalled:[],all:[],recentlyUpdated:[]}),B=o=>{const t=new Map,p=[];return o.forEach(r=>{t.set(r.key,{...r,children:[]})}),o.forEach(r=>{r.support_app&&t.has(r.support_app)&&t.get(r.support_app).children.push(t.get(r.key))}),t.forEach(r=>{(!r.support_app||!t.has(r.support_app))&&p.push(r)}),p},de=()=>{const o=Ce.value,t=Ie.value;if((!o||o==="")&&(t===""||t==null)){U.value.installed=B(v.value.installed),U.value.uninstalled=B(v.value.uninstalled),U.value.all=B(v.value.all),U.value.recentlyUpdated=B(v.value.recentlyUpdated);return}const p=r=>r.filter(M=>{const w=!o||M.title.includes(o),ee=!t||M.type===t;return w&&ee});U.value.installed=B(p(v.value.installed)),U.value.uninstalled=B(p(v.value.uninstalled)),U.value.all=B(p(v.value.all)),U.value.recentlyUpdated=B(p(v.value.recentlyUpdated))},v=c({installed:[],uninstalled:[],all:[],recentlyUpdated:[],error:""}),L=()=>{C.value=!0,Zl({}).then(o=>{var p;const t=o.data.list;v.value.error=o.data.error,v.value.installed=[],v.value.uninstalled=[],v.value.all=[],v.value.recentlyUpdated=[];for(const r in t)t[r].is_local==!1&&v.value.all.push(t[r]),t[r].install_info&&((p=Object.keys(t[r].install_info))!=null&&p.length)?(v.value.installed.push(t[r]),t[r].install_info.version!=t[r].version&&v.value.recentlyUpdated.push(t[r])):t[r].is_download==!0&&v.value.uninstalled.push(t[r]);de(),ie.routers.forEach((r,M)=>{r.children&&r.children.length?(r.name=pl(r.children),Ne.value[r.meta.app]=pl(r.children)):Ne.value[r.meta.app]=r.name}),C.value=!1}).catch(()=>{C.value=!1})};L();const Ne=c({}),D=c(""),S=c(!1),V=c(0),E=c({});let Te=null;const ze=new jt,hl=(o,t,p,r,M)=>{if(t=="开始安装插件"){p(ze);const w=xl(["/","——","\\","|"]);Te=setInterval(()=>{ze.flush("> "+w.next().value)},150)}};function xl(o){let t=0;return{next(){return t+1==o.length&&(t=0),{value:o[t++]}}}}const Pe=o=>{D.value=o,Wl(o).then(t=>{V.value=0,ce.value=!1,F.value=!1,P.value="",S.value=!0,be.value=[],E.value=t.data,ie.clearRouters()})},Oe=c(null),N=c(0);let y=null,Z=null;const Ve=(o=!0)=>{et().then(t=>{if(t.data){if(Oe.value=Date.now(),N.value=0,y&&clearInterval(y),y=setInterval(()=>{N.value++},1e3),o&&(Ee=[],D.value=t.data.addon,S.value||(Z=lt.success({title:a("warning"),dangerouslyUseHTMLString:!0,message:_l("div",{},[a("installingTips"),_l("span",{class:"text-primary cursor-pointer",onClick:yl},[a("installPercent")])]),duration:0,showClose:!1}))),t.data.error){R.value.pushMessage({content:t.data.error,class:"error"}),He.value=t.data.error,F.value=!0,y&&(clearInterval(y),y=null);return}t.data.mode=="cloud"&&wl(),setTimeout(()=>{Ve(!1)},2e3)}else o||(V.value=2,y&&(clearInterval(y),y=null),L(),ie.clearRouters(),Z.close())}).catch(t=>{R.value.pushMessage({content:t.message,class:"error"})})};Ve();const ce=c(!1),Ke=()=>{ce.value=!0,V.value=1,F.value=!1},gl=cl(()=>{const o=N.value,t=Math.floor(o/3600),p=Math.floor(o%3600/60),r=o%60;return[t>0?`${t}小时`:"",p>0?`${p}分钟`:"",`${r}秒`].filter(Boolean).join("")}),yl=()=>{S.value=!0,V.value=1},z=c(!1),P=c(""),kl=()=>{!E.value.is_pass||z.value||(P.value="local",z.value=!0,Oe.value=Date.now(),N.value=0,y&&clearInterval(y),y=setInterval(()=>{N.value++},1e3),tt({addon:D.value}).then(o=>{V.value=2,y&&(clearInterval(y),y=null),L(),z.value=!1,o.data.length&&(be.value=o.data)}).catch(o=>{z.value=!1}))},O=c(!1),bl=()=>{if(!we.value){qe();return}!E.value.is_pass||O.value||(O.value=!0,P.value="cloud",at({addon:D.value}).then(o=>{V.value=1,R.value.execute("clear"),R.value.execute("开始安装插件"),Ve(),O.value=!1}).catch(o=>{O.value=!1}))},qe=()=>{se.confirm(a("authTips"),a("warning"),{distinguishCancelAndClose:!0,confirmButtonText:a("toBind"),cancelButtonText:a("toNiucloud")}).then(()=>{Ye()}).catch(o=>{o==="cancel"&&window.open("https://www.niucloud.com/app")})},F=c(!1),He=c("");let Ee=[];const wl=()=>{st(D.value).then(o=>{const t=o.data.data??[];t[0]&&t[0].length&&S.value==!0&&t[0].forEach(p=>{Ee.includes(p.action)||(R.value.pushMessage({content:`${p.action}`}),Ee.push(p.action),p.code==0&&R.value.pushMessage({content:p.msg,class:"error"}))})}).catch(()=>{Z==null||Z.close()})};Ql(D,o=>{E.value={}});const Ue=c(!1),re=c({}),Cl=o=>{se.confirm(a("uninstallTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{Tl(o)})},Qe=o=>{var t;(t=ke.value)==null||t.open(o)},Il=()=>{var o;if(!we.value){qe();return}if(oe.value.cloudBuildTask){(o=oe.value)==null||o.open();return}se.confirm(a("cloudBuildTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{var t;(t=oe.value)==null||t.open()})},Tl=o=>{nt(o).then(({data:t})=>{t.is_pass?ot({addon:o}).then(p=>{L(),ie.clearRouters(),C.value=!1}).catch(()=>{C.value=!1}):(re.value=t,Ue.value=!0)})},Je=()=>{window.open("https://www.niucloud.com/app")},Vl=o=>{V.value==1&&!ce.value&&!F.value?se.confirm(a("installShowDialogCloseTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{it(D.value),y&&(clearInterval(y),y=null),ce.value=!1,P.value="",F.value=!1,o()}):V.value==2?(Me("installed"),location.reload()):o(),Te&&clearInterval(Te)},pe=c(!1),K=c({}),El=o=>{pe.value=!0,K.value=o},Ge=c(""),Ul=o=>{var t;Ge.value=o.key,(t=$e.value)==null||t.open()},_e=c(!1),fe=c(""),Xe=c(null),W=c(!1),A=c(!0);(()=>{A.value=!0,fl().then(o=>{A.value=!1,o.data.data&&o.data.data.length!=0&&(fe.value=o.data.data)}).catch(()=>{A.value=!1,_e.value=!1})})();const Ye=()=>{_e.value=!0},q=rl({auth_code:"",auth_secret:""}),Ae=c(),Al=rl({auth_code:[{required:!0,message:a("authCodePlaceholder"),trigger:"blur"}],auth_secret:[{required:!0,message:a("authSecretPlaceholder"),trigger:"blur"}]}),Bl=async o=>{W.value||!o||await o.validate(async t=>{t&&(W.value=!0,qt(q).then(()=>{W.value=!1,setTimeout(()=>{location.reload()},1e3)}).catch(()=>{W.value=!1}))})},Ze=()=>{window.open("https://www.niucloud.com/app")},Dl=()=>{window.open("https://doc.niucloud.com/v6.html?keywords=/chang-jian-wen-ti-chu-li/er-shi-wu-3001-sheng-7ea7-yun-bian-yi-mu-lu-du-xie-quan-xian-zhuang-tai-bu-tong-guo-ru-he-chu-li")},Sl=o=>{se.confirm(a("deleteAddonTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{Ot(o).then(()=>{L()})})},Fl=o=>{if(!o.support_version)return!1;const t=o.support_version.split("."),p=ue.value.split(".");return parseFloat(`${t[0]}.${t[1]}`)<parseFloat(`${p[0]}.${p[1]}`)};let Be=[];const $l=o=>{Be=o.map(t=>t.key)},Rl=()=>{if(!Be.length){ut({message:"请先勾选要升级的插件",type:"error",duration:5e3});return}Qe(Be.toString())},Ll=cl(()=>new Set((U.value[b.value]||[]).map(o=>o.key)));return(o,t)=>{const p=dt,r=ct,M=ge("search"),w=rt,ee=pt,We=_t,Ml=ft,m=vt,I=mt,jl=ht,el=xt,ve=gt,ll=ge("QuestionFilled"),tl=yt,me=kt,al=bt,Nl=wt,H=Ct,sl=It,nl=Tt,le=Vt,De=Et,zl=Ut,k=At,Q=Bt,he=ge("Select"),xe=ge("CloseBold"),Se=Dt,ol=St,il=Ft;return d(),_($,null,[n("div",Gt,[e(sl,{class:"box-card !border-none",shadow:"never"},{default:l(()=>{var ul;return[n("div",Xt,[n("span",Yt,u(i(a)("localAppText")),1)]),e(r,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),class:"mt-[10px]"},{default:l(()=>[e(p,{label:i(a)("installLabel"),name:"installed"},null,8,["label"]),e(p,{label:i(a)("uninstalledLabel"),name:"uninstalled"},null,8,["label"]),e(p,{label:i(a)("buyLabel"),name:"all"},null,8,["label"]),e(p,{label:i(a)("recentlyUpdated"),name:"recentlyUpdated"},{label:l(()=>[n("span",Zt,[n("span",null,u(i(a)("recentlyUpdated")),1),v.value.recentlyUpdated.length>0?(d(),_("span",Wt,u(v.value.recentlyUpdated.length),1)):h("",!0)])]),_:1},8,["label"])]),_:1},8,["modelValue"]),n("div",ea,[n("div",la,[e(ee,{class:"!w-[192px] !h-[32px] rounded-[4px]",placeholder:i(a)("search"),modelValue:Ce.value,"onUpdate:modelValue":t[1]||(t[1]=s=>Ce.value=s),modelModifiers:{trim:!0},onKeyup:Jl(de,["enter"])},{suffix:l(()=>[e(w,{class:"el-input__icon cursor-pointer",size:"14px",onClick:de},{default:l(()=>[e(M)]),_:1})]),_:1},8,["placeholder","modelValue","onKeyup"]),e(Ml,{modelValue:Ie.value,"onUpdate:modelValue":t[2]||(t[2]=s=>Ie.value=s),placeholder:"请选择类型",class:"!w-[192px] !h-[32px] rounded-[4px] ml-[20px]"},{default:l(()=>[e(We,{label:i(a)("全部"),value:""},null,8,["label"]),(d(!0),_($,null,G(Re.value,(s,x)=>(d(),g(We,{key:x,label:s,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(m,{type:"primary",onClick:de,class:"ml-[20px]"},{default:l(()=>[f(u(i(a)("搜索")),1)]),_:1})]),n("div",null,[X(e(m,{type:"primary",onClick:Rl,loading:(ul=ke.value)==null?void 0:ul.loading,disabled:A.value},{default:l(()=>[f(u(i(a)("batchUpgrade")),1)]),_:1},8,["loading","disabled"]),[[ae,b.value==="recentlyUpdated"]])])]),n("div",ta,[v.value[b.value].length&&!C.value?(d(),g(tl,{key:0,"tree-props":{children:"children"},"default-expand-all":!0,data:U.value[b.value],"row-key":"key",size:"large",onSelectionChange:$l},{default:l(()=>[e(I,{width:"24"},{default:l(({row:s})=>{var x;return[n("div",{class:Gl(["tree-child-cell",{"is-tree-parent":(x=s.children)==null?void 0:x.length,"is-tree-child":typeof s.support_app=="string"&&s.support_app!==""&&i(Ll).has(s.support_app)}])},sa,2)]}),_:1}),b.value==="recentlyUpdated"?(d(),g(I,{key:0,type:"selection"})):h("",!0),e(I,{label:i(a)("appName"),align:"left",width:"500"},{default:l(({row:s})=>{var x,te;return[n("div",na,[e(jl,{class:"w-[54px] h-[54px]",src:s.icon,fit:"contain"},{error:l(()=>[oa]),_:2},1032,["src"]),n("div",ia,[n("div",ua,u(s.title),1),s.install_info&&((x=Object.keys(s.install_info))!=null&&x.length)?(d(),_("div",da,u(s.install_info.version),1)):(d(),_("div",ca,u(s.version),1)),n("div",ra,[b.value=="recentlyUpdated"&&s.install_info&&((te=Object.keys(s.install_info))!=null&&te.length)&&s.install_info.version!=s.version?(d(),g(el,{key:0,type:"danger",size:"small"},{default:l(()=>[f(u(i(a)("newVersion"))+u(s.version),1)]),_:2},1024)):h("",!0),Fl(s)?(d(),g(ve,{key:1,effect:"dark",content:`该插件适配框架版本为${s.support_version}，与已安装框架版本${ue.value}不完全兼容`,placement:"top-start"},{default:l(()=>[e(el,{type:"warning",size:"small",class:"ml-[3px]"},{default:l(()=>[f("该插件适配框架版本为"+u(s.support_version)+"，与已安装框架版本"+u(ue.value)+"不完全兼容",1)]),_:2},1024)]),_:2},1032,["content"])):h("",!0)])])])]}),_:1},8,["label"]),e(I,{align:"left","min-width":"150"},{header:l(()=>[n("div",pa,[n("span",_a,u(i(a)("appIdentification")),1),e(ve,{class:"box-item",effect:"light",content:i(a)("tipText"),placement:"bottom"},{default:l(()=>[e(w,{class:"cursor-pointer text-[16px] text-[#a9a9a9]"},{default:l(()=>[e(ll)]),_:1})]),_:1},8,["content"])])]),default:l(({row:s})=>[n("span",fa,u(s.key),1)]),_:1}),e(I,{label:i(a)("introduction"),align:"left","min-width":"250"},{default:l(({row:s})=>[n("span",va,u(s.desc),1)]),_:1},8,["label"]),e(I,{label:i(a)("type"),align:"left","min-width":"80"},{default:l(({row:s})=>[n("span",ma,u(s.type==="app"?i(a)("app"):i(a)("addon")),1)]),_:1},8,["label"]),e(I,{label:i(a)("author"),align:"left","min-width":"80"},{default:l(({row:s})=>[n("span",ha,u(s.author),1)]),_:1},8,["label"]),e(I,{label:i(a)("operation"),fixed:"right",align:"right",width:"250"},{default:l(({row:s})=>{var x,te;return[b.value=="recentlyUpdated"&&s.install_info&&((x=Object.keys(s.install_info))!=null&&x.length)&&s.install_info.version!=s.version?(d(),g(m,{key:0,class:"!text-[13px]",type:"primary",link:"",onClick:J=>Qe(s.key)},{default:l(()=>[f(u(i(a)("upgrade")),1)]),_:2},1032,["onClick"])):h("",!0),s.install_info&&((te=Object.keys(s.install_info))!=null&&te.length)?(d(),g(m,{key:1,class:"!text-[13px]",type:"primary",link:"",onClick:J=>Cl(s.key)},{default:l(()=>[f(u(i(a)("unload")),1)]),_:2},1032,["onClick"])):h("",!0),s.is_download&&(!s.install_info||!Object.keys(s.install_info).length)?(d(),_($,{key:2},[e(m,{class:"!text-[13px]",type:"primary",link:"",onClick:J=>Pe(s.key)},{default:l(()=>[f(u(i(a)("install")),1)]),_:2},1032,["onClick"]),e(m,{class:"!text-[13px]",type:"primary",link:"",onClick:J=>Sl(s.key)},{default:l(()=>[f(u(i(a)("delete")),1)]),_:2},1032,["onClick"])],64)):h("",!0),s.is_download?h("",!0):(d(),g(m,{key:3,class:"!text-[13px]",loading:j.value==s.key,disabled:j.value!="",type:"primary",link:"",onClick:Xl(J=>je(s),["stop"])},{default:l(()=>[n("span",null,u(i(a)("down")),1)]),_:2},1032,["loading","disabled","onClick"])),e(m,{class:"!text-[13px]",type:"primary",link:"",onClick:J=>El(s)},{default:l(()=>[f(u(i(a)("detail")),1)]),_:2},1032,["onClick"]),e(m,{class:"!text-[13px]",type:"primary",link:"",onClick:J=>Ul(s)},{default:l(()=>[f("更新信息")]),_:2},1032,["onClick"])]}),_:1},8,["label"])]),_:1},8,["data"])):h("",!0),C.value||!v.value[b.value].length?(d(),_("div",xa,[e(tl,{data:[],size:"large",class:"pt-[5px]"},{empty:l(()=>[ga]),default:l(()=>[e(I,{label:i(a)("appName"),align:"left",width:"320"},null,8,["label"]),e(I,{align:"left","min-width":"120"}),e(I,{label:i(a)("introduction"),align:"left","min-width":"200"},null,8,["label"]),e(I,{label:i(a)("type"),align:"left","min-width":"100"},null,8,["label"]),e(I,{label:i(a)("author"),align:"left","min-width":"100"},null,8,["label"]),e(I,{label:i(a)("operation"),fixed:"right",align:"right",width:"150"},null,8,["label"])]),_:1}),C.value?X((d(),_("div",ya,null,512)),[[il,C.value]]):h("",!0)])):h("",!0),!v.value.installed.length&&!C.value&&b.value=="installed"&&!A.value?(d(),g(me,{key:2,class:"mx-auto overview-empty"},{image:l(()=>[ka]),description:l(()=>[n("p",ba,u(i(a)("installed-empty")),1)]),_:1})):h("",!0),!v.value.uninstalled.length&&!C.value&&b.value=="uninstalled"&&!A.value?(d(),g(me,{key:3,class:"mx-auto overview-empty"},{image:l(()=>[wa]),description:l(()=>[n("p",Ca,[n("span",null,u(i(a)("descriptionLeft")),1),e(al,{type:"primary",onClick:Ze,class:"mx-[5px]"},{default:l(()=>[f(u(i(a)("link")),1)]),_:1}),n("span",null,u(i(a)("descriptionRight")),1)])]),_:1})):h("",!0),!v.value.all.length&&!C.value&&!fe.value&&b.value=="all"&&!A.value?(d(),_("div",Ia,[Ta,n("div",Va,[e(m,{class:"w-[154px] !h-[48px] mt-[8px]",type:"primary",onClick:Ye},{default:l(()=>[f("授权码认证")]),_:1}),e(Nl,{ref_key:"getAuthCodeDialog",ref:Xe,placement:"bottom",width:478,trigger:"click",class:"mt-[8px]"},{reference:l(()=>[e(m,{class:"w-[154px] !h-[48px] mt-[8px] !text-[var(--el-color-primary)] hover:!text-[var(--el-color-primary)] !bg-transparent",plain:"",type:"primary"},{default:l(()=>[f("如何获取授权码?")]),_:1})]),default:l(()=>[n("div",Ea,[Ua,n("div",Aa,[e(m,{class:"w-[182px] !h-[48px]",plain:"",onClick:Je},{default:l(()=>[f("去应用市场逛逛")]),_:1}),e(m,{class:"w-[100px] !h-[48px]",plain:"",onClick:t[3]||(t[3]=s=>Xe.value.hide())},{default:l(()=>[f("关闭")]),_:1})])])]),_:1},512)])])):h("",!0),!v.value.all.length&&!C.value&&fe.value&&b.value=="all"&&!A.value?(d(),g(me,{key:5,class:"mx-auto overview-empty"},{image:l(()=>[Ba]),description:l(()=>[n("p",Da,[n("span",null,u(i(a)("buyDescriptionLeft")),1),e(al,{type:"primary",onClick:Ze,class:"mx-[5px]"},{default:l(()=>[f(u(i(a)("link")),1)]),_:1}),n("span",null,u(i(a)("descriptionRight")),1)])]),_:1})):h("",!0),!v.value.recentlyUpdated.length&&!C.value&&fe.value&&b.value=="recentlyUpdated"&&!A.value?(d(),g(me,{key:6,class:"mx-auto overview-empty"},{image:l(()=>[Sa]),description:l(()=>[n("p",Fa,u(i(a)("recentlyUpdatedEmpty")),1)]),_:1})):h("",!0)]),e(le,{modelValue:_e.value,"onUpdate:modelValue":t[7]||(t[7]=s=>_e.value=s),title:"授权码认证",width:"400px"},{default:l(()=>[e(nl,{model:q,"label-width":"0",ref_key:"formRef",ref:Ae,rules:Al,class:"page-form"},{default:l(()=>[e(sl,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[e(H,{prop:"auth_code"},{default:l(()=>[e(ee,{modelValue:q.auth_code,"onUpdate:modelValue":t[4]||(t[4]=s=>q.auth_code=s),modelModifiers:{trim:!0},placeholder:i(a)("authCodePlaceholder"),class:"input-width",clearable:"",size:"large"},null,8,["modelValue","placeholder"])]),_:1}),n("div",$a,[e(H,{prop:"auth_secret"},{default:l(()=>[e(ee,{modelValue:q.auth_secret,"onUpdate:modelValue":t[5]||(t[5]=s=>q.auth_secret=s),modelModifiers:{trim:!0},clearable:"",placeholder:i(a)("authSecretPlaceholder"),class:"input-width",size:"large"},null,8,["modelValue","placeholder"])]),_:1})]),n("div",Ra,u(i(a)("authInfoTips")),1),n("div",La,[e(m,{type:"primary",class:"w-full",size:"large",loading:W.value,onClick:t[6]||(t[6]=s=>Bl(Ae.value))},{default:l(()=>[f(u(i(a)("confirm")),1)]),_:1},8,["loading"])]),n("div",Ma,[e(m,{type:"primary",link:"",onClick:Je},{default:l(()=>[f(u(i(a)("notHaveAuth")),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),e(le,{modelValue:pe.value,"onUpdate:modelValue":t[9]||(t[9]=s=>pe.value=s),title:i(a)("plugDetail"),width:"500px","destroy-on-close":!0},{footer:l(()=>[n("span",Oa,[e(m,{type:"primary",onClick:t[8]||(t[8]=s=>pe.value=!1)},{default:l(()=>[f(u(i(a)("confirm")),1)]),_:1})])]),default:l(()=>[e(nl,{model:K.value,"label-width":"120px",ref_key:"formRef",ref:Ae,class:"page-form"},{default:l(()=>[e(H,{label:i(a)("title")},{default:l(()=>[n("div",ja,u(K.value.title),1)]),_:1},8,["label"]),e(H,{label:i(a)("desc")},{default:l(()=>[n("div",Na,u(K.value.desc),1)]),_:1},8,["label"]),e(H,{label:i(a)("author")},{default:l(()=>[n("div",za,u(K.value.author),1)]),_:1},8,["label"]),e(H,{label:i(a)("version")},{default:l(()=>[n("div",Pa,u(K.value.version),1)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(le,{modelValue:S.value,"onUpdate:modelValue":t[14]||(t[14]=s=>S.value=s),title:i(a)("addonInstall"),width:"850px","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":Vl},{default:l(()=>[V.value!=2&&!F.value?(d(),g(zl,{key:0,space:200,active:V.value,class:"number-of-steps","process-status":"process","align-center":""},{default:l(()=>[e(De,{title:i(a)("envCheck"),class:"flex-1"},null,8,["title"]),e(De,{title:i(a)("installProgress"),class:"flex-1"},null,8,["title"]),e(De,{title:i(a)("installComplete"),class:"flex-1"},null,8,["title"])]),_:1},8,["active"])):h("",!0),X((d(),_("div",null,[n("div",Ka,[E.value.dir?(d(),_("div",qa,[n("p",Ha,u(i(a)("dirPermission")),1),E.value.is_pass?h("",!0):(d(),_("div",{key:0,class:"mt-[10px] mx-[20px] text-[14px] cursor-pointer text-primary flex items-center justify-between bg-[#EFF6FF] rounded-[4px] p-[10px]",onClick:Dl},[n("div",Qa,[e(w,{size:17},{default:l(()=>[e(ll)]),_:1}),Ja]),Ga])),n("div",Xa,[e(Q,{class:"py-[10px] items table-head-bg pl-[15px] mb-[10px]"},{default:l(()=>[e(k,{span:18},{default:l(()=>[n("span",null,u(i(a)("path")),1)]),_:1}),e(k,{span:3},{default:l(()=>[n("span",null,u(i(a)("demand")),1)]),_:1}),e(k,{span:3},{default:l(()=>[n("span",null,u(i(a)("status")),1)]),_:1})]),_:1}),e(Se,{style:{height:"calc(300px)",overflow:"auto"}},{default:l(()=>[(d(!0),_($,null,G(E.value.dir.is_readable,(s,x)=>(d(),g(Q,{class:"pb-[10px] items pl-[15px]",key:x},{default:l(()=>[e(k,{span:18},{default:l(()=>[n("span",null,u(s.dir),1)]),_:2},1024),e(k,{span:3},{default:l(()=>[n("span",null,u(i(a)("readable")),1)]),_:1}),e(k,{span:3},{default:l(()=>[s.status?(d(),_("span",Ya,[e(w,{color:"green"},{default:l(()=>[e(he)]),_:1})])):(d(),_("span",Za,[e(w,{color:"red"},{default:l(()=>[e(xe)]),_:1})]))]),_:2},1024)]),_:2},1024))),128)),(d(!0),_($,null,G(E.value.dir.is_write,(s,x)=>(d(),g(Q,{class:"pb-[10px] items pl-[15px]",key:x},{default:l(()=>[e(k,{span:18},{default:l(()=>[n("span",null,u(s.dir),1)]),_:2},1024),e(k,{span:3},{default:l(()=>[n("span",null,u(i(a)("write")),1)]),_:1}),e(k,{span:3},{default:l(()=>[s.status?(d(),_("span",Wa,[e(w,{color:"green"},{default:l(()=>[e(he)]),_:1})])):(d(),_("span",es,[e(w,{color:"red"},{default:l(()=>[e(xe)]),_:1})]))]),_:2},1024)]),_:2},1024))),128))]),_:1})])])):h("",!0)]),n("div",ls,[e(ve,{effect:"dark",placement:"top"},{content:l(()=>[n("div",ts,u(i(a)("installTips")),1)]),default:l(()=>[e(m,{disabled:!E.value.is_pass||O.value,loading:z.value,onClick:kl},{default:l(()=>[f(u(i(a)("localInstall")),1)]),_:1},8,["disabled","loading"])]),_:1}),e(ve,{effect:"dark",placement:"top"},{content:l(()=>[n("div",as,u(i(a)("cloudInstallTips")),1)]),default:l(()=>[e(m,{type:"primary",disabled:!E.value.is_pass||z.value,loading:O.value,onClick:bl},{default:l(()=>[f(u(i(a)("cloudInstall")),1)]),_:1},8,["disabled","loading"])]),_:1})])])),[[ae,V.value==0],[il,!E.value.dir]]),X(n("div",ss,[e(i(Nt),{ref_key:"terminalRef",ref:R,name:`install-${vl.value}`,context:D.value,"init-log":null,"show-header":!1,"show-log-time":!0,onExecCmd:hl},null,8,["name","context"])],512),[[ae,V.value==1&&!F.value]]),X(n("div",ns,[e(ol,{icon:"success",title:i(a)("addonInstallSuccess")},{icon:l(()=>[os]),extra:l(()=>[(d(!0),_($,null,G(be.value,(s,x)=>(d(),_("div",{class:"mb-[10px]",key:x},[n("div",is,u(s),1)]))),128)),N.value>0?(d(),_("div",us,"本次安装用时"+u(i(gl)),1)):h("",!0),n("div",ds,[P.value=="cloud"?(d(),g(m,{key:0,onClick:t[10]||(t[10]=s=>Ke()),class:"!w-[90px]"},{default:l(()=>[f("返回")]),_:1})):h("",!0),e(m,{onClick:t[11]||(t[11]=s=>S.value=!1),type:"primary",class:"!w-[90px]"},{default:l(()=>[f("完成")]),_:1})])]),_:1},8,["title"])],512),[[ae,V.value==2]]),X(n("div",cs,[e(ol,{icon:"error",title:i(a)("安装失败")},{icon:l(()=>[rs]),extra:l(()=>[e(Se,{class:"max-h-[120px] !overflow-auto text-[15px] text-[#4F516D] mb-[15px] mt-[-15px]"},{default:l(()=>[f(u(He.value),1)]),_:1}),P.value=="cloud"?(d(),g(m,{key:0,onClick:t[12]||(t[12]=s=>Ke()),class:"!w-[90px]"},{default:l(()=>[f("错误信息")]),_:1})):h("",!0),e(m,{onClick:t[13]||(t[13]=s=>S.value=!1),type:"primary",class:"!w-[90px]"},{default:l(()=>[f("完成")]),_:1})]),_:1},8,["title"])],512),[[ae,F.value]])]),_:1},8,["modelValue","title"]),e(le,{modelValue:Ue.value,"onUpdate:modelValue":t[15]||(t[15]=s=>Ue.value=s),title:i(a)("addonUninstall"),width:"850px","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(Se,{"max-height":"50vh"},{default:l(()=>[n("div",ps,[re.value.dir?(d(),_("div",_s,[n("p",fs,u(i(a)("dirPermission")),1),n("div",vs,[e(Q,{class:"py-[10px] items table-head-bg pl-[15px] mb-[10px]"},{default:l(()=>[e(k,{span:18},{default:l(()=>[n("span",null,u(i(a)("path")),1)]),_:1}),e(k,{span:3},{default:l(()=>[n("span",null,u(i(a)("demand")),1)]),_:1}),e(k,{span:3},{default:l(()=>[n("span",null,u(i(a)("status")),1)]),_:1})]),_:1}),(d(!0),_($,null,G(re.value.dir.is_readable,(s,x)=>(d(),g(Q,{class:"pb-[10px] items pl-[15px]",key:x},{default:l(()=>[e(k,{span:18},{default:l(()=>[n("span",null,u(s.dir),1)]),_:2},1024),e(k,{span:3},{default:l(()=>[n("span",null,u(i(a)("readable")),1)]),_:1}),e(k,{span:3},{default:l(()=>[s.status?(d(),_("span",ms,[e(w,{color:"green"},{default:l(()=>[e(he)]),_:1})])):(d(),_("span",hs,[e(w,{color:"red"},{default:l(()=>[e(xe)]),_:1})]))]),_:2},1024)]),_:2},1024))),128)),(d(!0),_($,null,G(re.value.dir.is_write,(s,x)=>(d(),g(Q,{class:"pb-[10px] items pl-[15px]",key:x},{default:l(()=>[e(k,{span:18},{default:l(()=>[n("span",null,u(s.dir),1)]),_:2},1024),e(k,{span:3},{default:l(()=>[n("span",null,u(i(a)("write")),1)]),_:1}),e(k,{span:3},{default:l(()=>[s.status?(d(),_("span",xs,[e(w,{color:"green"},{default:l(()=>[e(he)]),_:1})])):(d(),_("span",gs,[e(w,{color:"red"},{default:l(()=>[e(xe)]),_:1})]))]),_:2},1024)]),_:2},1024))),128))])])):h("",!0)])]),_:1})]),_:1},8,["modelValue","title"]),e(le,{modelValue:Y.value,"onUpdate:modelValue":t[17]||(t[17]=s=>Y.value=s),title:"下载提示",width:"30%"},{footer:l(()=>[n("span",ks,[e(m,{onClick:t[16]||(t[16]=s=>Y.value=!1)},{default:l(()=>[f("取消")]),_:1}),e(m,{type:"primary",onClick:ml},{default:l(()=>[f("确定")]),_:1})])]),default:l(()=>[ys]),_:1},8,["modelValue"])]}),_:1})]),e(Jt,{upgradeKey:Ge.value,ref_key:"upgradeLogRef",ref:$e},null,8,["upgradeKey"]),e(Ht,{ref_key:"upgradeRef",ref:ke,onComplete:L,onCloudbuild:Il},null,512),e(Qt,{ref_key:"cloudBuildRef",ref:oe},null,512)],64)}}});const rn=Lt(bs,[["__scopeId","data-v-0e2fc76e"]]);export{rn as default};
