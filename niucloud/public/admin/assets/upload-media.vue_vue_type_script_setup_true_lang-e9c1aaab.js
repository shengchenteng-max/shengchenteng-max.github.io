import{d as l,r as u,X as d,aQ as i,Y as f,h as g,m as _,w as h,b as y,aR as k,u as R,aV as v}from"./index-9f163f98.js";/* empty css                  *//* empty css                    */const j=l({__name:"upload-media",props:{type:{type:String,default:"image"}},emits:["success"],setup(r,{emit:c}){const o=r,s=u(null),m=d(()=>{const a={};return a.token=i(),{action:`/adminapi//wechat/media/${o.type}`,multiple:!0,headers:a,accept:o.type=="image"?".bmp,.png,.jpeg,.jpg,.gif":".mp4",onSuccess:(t,e,w)=>{var p,n;t.code>=1?(c("success",t.data),(p=s.value)==null||p.handleRemove(e)):(e.status="fail",(n=s.value)==null||n.handleRemove(e),f({message:t.msg,type:"error"}))}}});return(a,t)=>{const e=v;return g(),_(e,k(R(m),{ref_key:"uploadRef",ref:s}),{default:h(()=>[y(a.$slots,"default")]),_:3},16)}}});export{j as _};
