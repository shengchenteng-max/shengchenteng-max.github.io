import{a6 as t,a7 as e,a8 as a,ac as s,bw as o,aP as n,i,j as l,o as r,c,w as u,b as d,a2 as h,W as p,X as m,ab as f,n as _,g,y as x,z as y,F as b,k as w,d as v,r as k,J as C,t as S,e as X,am as z,an as T,b_ as A,Q as M,a as Y,b$ as I,P}from"./index-837da579.js";import{_ as R}from"./u-icon.963870f0.js";import{_ as j}from"./_plugin-vue_export-helper.1b428a4d.js";import{u as $,M as F}from"./useMescroll.6b3a2f0c.js";import"./mescroll-i18n.54bd5572.js";const D={props:{show:{type:Boolean,default:()=>t.swipeActionItem.show},name:{type:[String,Number],default:()=>t.swipeActionItem.name},disabled:{type:Boolean,default:()=>t.swipeActionItem.disabled},autoClose:{type:Boolean,default:()=>t.swipeActionItem.autoClose},threshold:{type:Number,default:()=>t.swipeActionItem.threshold},options:{type:Array,default:()=>t.swipeActionItem.rightOptions},duration:{type:[String,Number],default:()=>t.swipeActionItem.duration}}};function q(t){return t.toString().indexOf("s")>=0?t:t>30?t+"ms":t+"s"}function N(t,e,a){e.getState(),a.selectAllComponents(".u-swipe-action-item__right__button"),e.requestAnimationFrame((function(){e.setStyle({transition:"none",transform:"translateX("+t+"px)","-webkit-transform":"translateX("+t+"px)"})}))}function O(t,e){var a=t.getState();e.selectAllComponents(".u-swipe-action-item__right__button");var s=q(a.duration),o=-a.buttonsWidth;t.requestAnimationFrame((function(){t.setStyle({transition:"transform "+s,transform:"translateX("+o+"px)","-webkit-transform":"translateX("+o+"px)"})})),W("open",t,e)}function W(t,e,a){e.getState().status=t,a.callMethod("setState",t)}function B(t,e){var a=t.getState(),s=e.selectAllComponents(".u-swipe-action-item__right__button"),o=s.length,n=q(a.duration);t.requestAnimationFrame((function(){t.setStyle({transition:"transform "+n,transform:"translateX(0px)","-webkit-transform":"translateX(0px)"});for(var e=o-1;e>=0;e--)s[e].setStyle({transition:"transform "+n,transform:"translateX(0px)","-webkit-transform":"translateX(0px)"})})),W("close",t,e)}const H={touchstart:function(t,e){var a=t.instance.getState();if(!a.disabled){var s=t.touches;s&&s.length>1||(a.moving=!0,a.startX=s[0].pageX,a.startY=s[0].pageY,e.callMethod("closeOther"))}},touchmove:function(t,e){var a=t.instance,s=a.getState();if(!s.disabled&&s.moving){var o=t.touches,n=o[0].pageX,i=o[0].pageY,l=n-s.startX,r=i-s.startY,c=s.buttonsWidth;(Math.abs(l)>Math.abs(r)||Math.abs(l)>s.threshold)&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()),Math.abs(l)<Math.abs(r)||("open"===s.status?(l<0&&(l=0),l>c&&(l=c),N(-c+l,a,e)):(l>0&&(l=0),Math.abs(l)>c&&(l=-c),N(l,a,e)))}},touchend:function(t,e){var a=t.instance,s=a.getState();if(s.moving&&!s.disabled){var o=t.changedTouches?t.changedTouches[0]:{},n=o.pageX;o.pageY;var i=n-s.startX;if("open"===s.status){if(i<0)return;if(0===i)return B(a,e);Math.abs(i)<s.threshold?O(a,e):B(a,e)}else{if(i>0)return;Math.abs(i)<s.threshold?B(a,e):O(a,e)}}},sizeChange:function(t,e,a,s){var o=s.getState();if(o&&t){if(o.disabled=t.disabled,o.duration=t.duration,o.show=t.show,o.threshold=t.threshold,o.buttons=t.buttons,o.buttons)for(var n=o.buttons.length,i=0,l=t.buttons,r=0;r<n;r++)i+=l[r].width;o.buttonsWidth=i}},statusChange:function(t,e,a,s){var o=s.getState();o.disabled||("close"===t&&"open"===o.status?B(s,a):"open"===t&&"close"===o.status&&O(s,a))}},U=t=>{t.$wxs||(t.$wxs=[]),t.$wxs.push("wxs"),t.mixins||(t.mixins=[]),t.mixins.push({beforeCreate(){this.wxs=H}})},V={name:"u-swipe-action-item",emits:["click"],mixins:[e,a,{methods:{getTouchPoint:t=>t?t.touches&&t.touches[0]?{x:t.touches[0].pageX,y:t.touches[0].pageY}:t.changedTouches&&t.changedTouches[0]?{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}:{x:t.clientX||0,y:t.clientY||0}:{x:0,y:0},resetTouchStatus(){this.direction="",this.deltaX=0,this.deltaY=0,this.offsetX=0,this.offsetY=0},touchStart(t){this.resetTouchStatus();const e=this.getTouchPoint(t);this.startX=e.x,this.startY=e.y},touchMove(t){const e=this.getTouchPoint(t);var a,s;this.deltaX=e.x-this.startX,this.deltaY=e.y-this.startY,this.offsetX=Math.abs(this.deltaX),this.offsetY=Math.abs(this.deltaY),this.direction=this.direction||(a=this.offsetX,s=this.offsetY,a>s&&a>10?"horizontal":s>a&&s>10?"vertical":"")}}},{methods:{closeHandler(){this.status="close"},setState(t){this.status=t},closeOther(){this.parent&&this.parent.closeOther(this)}}},D],data:()=>({size:{},parentData:{autoClose:!0},status:"close",sliderStyle:{}}),watch:{wxsInit(t,e){this.queryRect()}},computed:{wxsInit(){return[this.disabled,this.autoClose,this.threshold,this.options,this.duration]}},mounted(){this.init()},methods:{addUnit:s,getPx:o,init(){this.updateParentData(),n().then((()=>{this.queryRect()}))},updateParentData(){this.getParentData("u-swipe-action")},queryRect(){this.$uGetRect(".u-swipe-action-item__right__button",!0).then((t=>{this.size={buttons:t,show:this.show,disabled:this.disabled,threshold:this.threshold,duration:this.duration}}))},buttonClickHandler(t,e){this.$emit("click",{index:e,name:this.name})}}};U(V);const E=j(V,[["render",function(t,e,a,s,o,n){const v=i(l("u-icon"),R),k=b,C=w;return r(),c(C,{class:"u-swipe-action-item",ref:"u-swipe-action-item"},{default:u((()=>[d(C,{class:"u-swipe-action-item__right"},{default:u((()=>[h(t.$slots,"button",{},(()=>[(r(!0),p(m,null,f(t.options,((t,e)=>(r(),c(C,{key:e,class:"u-swipe-action-item__right__button",ref_for:!0,ref:`u-swipe-action-item__right__button-${e}`,style:_([{alignItems:t.style&&t.style.borderRadius?"center":"stretch"}]),onClick:a=>n.buttonClickHandler(t,e)},{default:u((()=>[d(C,{class:"u-swipe-action-item__right__button__wrapper",style:_([{backgroundColor:t.style&&t.style.backgroundColor?t.style.backgroundColor:"#C7C6CD",borderRadius:t.style&&t.style.borderRadius?t.style.borderRadius:"0",padding:t.style&&t.style.borderRadius?"0":"0 15px"},t.style])},{default:u((()=>[t.icon?(r(),c(v,{key:0,name:t.icon,color:t.style&&t.style.color?t.style.color:"#ffffff",size:t.iconSize?n.addUnit(t.iconSize):t.style&&t.style.fontSize?1.2*n.getPx(t.style.fontSize):17,customStyle:{marginRight:t.text?"2px":0}},null,8,["name","color","size","customStyle"])):g("v-if",!0),t.text?(r(),c(k,{key:1,class:"u-swipe-action-item__right__button__wrapper__text u-line-1",style:_([{color:t.style&&t.style.color?t.style.color:"#ffffff",fontSize:t.style&&t.style.fontSize?t.style.fontSize:"16px",lineHeight:t.style&&t.style.fontSize?t.style.fontSize:"16px"}])},{default:u((()=>[x(y(t.text),1)])),_:2},1032,["style"])):g("v-if",!0)])),_:2},1032,["style"])])),_:2},1032,["style","onClick"])))),128))]),!0)])),_:3}),d(C,{class:"u-swipe-action-item__content",onTouchstart:t.wxs.touchstart,onTouchmove:t.wxs.touchmove,onTouchend:t.wxs.touchend,status:o.status,"change:status":t.wxs.statusChange,size:o.size,"change:size":t.wxs.sizeChange},{default:u((()=>[h(t.$slots,"default",{},void 0,!0)])),_:3},8,["onTouchstart","onTouchmove","onTouchend","status","change:status","size","change:size"])])),_:3},512)}],["__scopeId","data-v-9e5550f1"]]),G=j(v({__name:"account",setup(t){const{mescrollInit:e,downCallback:a,getMescroll:s}=$(T,z),o=k([]),n=k(!1),h=k("bank"),v=k(null),R=k("get");C((t=>{t.type&&(h.value=t.type),t.mode&&(R.value=t.mode)}));const j=t=>{n.value=!1;let e={page:t.num,limit:t.size,account_type:h.value};A(e).then((e=>{const a=e.data.data;1==t.num&&(o.value=[]),o.value=o.value.concat(a),t.endSuccess(a.length),n.value=!0})).catch((()=>{n.value=!0,t.endErr()}))},D=k([{text:S("delete"),style:{backgroundColor:"#F56C6C"}}]),q=t=>{"get"==R.value?Y({url:"/app/pages/member/account_edit",param:{id:t.account_id,type:h.value,mode:R.value},mode:"redirectTo"}):Y({url:"/app/pages/member/apply_cash_out",param:{account_id:t.account_id,type:h.value},mode:"redirectTo"})};return(t,a)=>{const s=P,n=w,k=b,C=i(l("u-swipe-action-item"),E);return r(),c(n,{class:"w-screen h-screen bg-[var(--page-bg-color)]",style:_(t.themeColor())},{default:u((()=>[d(F,{ref_key:"mescrollRef",ref:v,onInit:X(e),down:{use:!1},onUp:j},{default:u((()=>[g(" 多嵌套一层是为了微信小程序兼容 "),(r(!0),p(m,null,f(o.value,((t,e)=>(r(),c(n,{class:"sidebar-margin my-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden",key:e},{default:u((()=>[d(C,{options:D.value,onClick:t=>(t=>{const e=o.value[t];I(e.account_id).then((()=>{o.value.splice(t,1)})).catch()})(e)},{default:u((()=>[d(n,{class:"card-template flex justify-between"},{default:u((()=>[d(n,{class:"flex items-center"},{default:u((()=>[d(n,{class:"w-[80rpx] h-[80rpx] flex items-center justify-center",onClick:e=>q(t)},{default:u((()=>["bank"==t.account_type?(r(),c(s,{key:0,class:"w-[80rpx] h-[52rpx] align-middle",src:X(M)("static/resource/images/member/apply_withdrawal/bank-icon.png"),mode:"widthFix"},null,8,["src"])):"wechat_code"==t.account_type?(r(),c(s,{key:1,class:"w-[80rpx] h-[52rpx] align-middle",src:X(M)("static/resource/images/member/apply_withdrawal/wechat_code.png"),mode:"widthFix"},null,8,["src"])):(r(),c(s,{key:2,class:"h-[78rpx] w-[78rpx] align-middle",src:X(M)("static/resource/images/member/apply_withdrawal/alipay-icon.png"),mode:"widthFix"},null,8,["src"]))])),_:2},1032,["onClick"]),d(n,{class:"flex flex-col ml-[20rpx]",onClick:e=>q(t)},{default:u((()=>[d(n,{class:"text-[#333] text-[28rpx]"},{default:u((()=>[x(y("bank"==t.account_type?t.bank_name:"wechat_code"==t.account_type?X(S)("wechatCode"):X(S)("alipayAccountNo")),1)])),_:2},1024),"bank"==t.account_type?(r(),c(n,{key:0,class:"text-[var(--text-color-light9)] text-[24rpx] mt-[12rpx]"},{default:u((()=>[x(y(X(S)("endNumber"))+" "+y(t.account_no.substring(t.account_no.length-4))+y(X(S)("bankCard")),1)])),_:2},1024)):(r(),c(n,{key:1,class:"text-[var(--text-color-light9)] text-[24rpx] mt-[12rpx]"},{default:u((()=>[x(y(t.account_no),1)])),_:2},1024))])),_:2},1032,["onClick"])])),_:2},1024),d(k,{class:"flex items-center nc-iconfont nc-icon-xiugaiV6xx flex-shrink-0 text-[28rpx] p-[20rpx] pr-0",onClick:e=>(t=>{Y({url:"/app/pages/member/account_edit",param:{id:t.account_id,type:t.account_type,mode:R.value}})})(t)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["options","onClick"])])),_:2},1024)))),128)),d(n,{class:"card-template sidebar-margin my-[var(--top-m)] flex items-center",onClick:a[0]||(a[0]=t=>X(Y)({url:"/app/pages/member/account_edit",param:{type:h.value,mode:R.value}}))},{default:u((()=>[d(k,{class:"nc-iconfont nc-icon-jiahaoV6xx text-[30rpx]"}),d(k,{class:"text-[28rpx] ml-[10rpx] flex-1"},{default:u((()=>[x(y("bank"==h.value?X(S)("addBankCard"):"wechat_code"==h.value?X(S)("addWechatCode"):X(S)("addAlipayAccount")),1)])),_:1}),d(k,{class:"nc-iconfont nc-icon-youV6xx text-[24rpx] text-[var(--text-color-light6)]"})])),_:1})])),_:1},8,["onInit"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-114a888a"]]);export{G as default};
