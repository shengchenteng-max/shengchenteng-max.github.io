import{_ as e}from"./loading-page.vue_vue_type_script_setup_true_lang.765e9de6.js";import{d as a,u as t,J as r,at as s,r as o,m as l,o as n,c as i,w as d,b as u,e as p,f as c,v as f,g as m,n as _,W as x,ab as g,X as h,y as j,z as y,a as v,i as b,j as S,k as w,G as k,t as F,F as L}from"./index-837da579.js";import{u as I}from"./useDiyForm.d795a295.js";import{d as N}from"./index.7e17774e.js";import{a as R}from"./diy_form.d0b09502.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.57b9bf82.js";import"./u-transition.38ad69d8.js";import"./u-icon.963870f0.js";import"./u-avatar.10036933.js";import"./u-popup.80b537cf.js";import"./u-parse.626f9a94.js";import"./top-tabbar.e594c8c6.js";import"./manifest.ed582bbb.js";import"./u-checkbox-group.7cf00048.js";import"./u-action-sheet.7adb885b.js";import"./u-line.030b2c5d.js";import"./area-select.vue_vue_type_script_setup_true_lang.3b685e6f.js";import"./u-input.3e4051bb.js";import"./u-upload.6237880e.js";const D=C(a({__name:"personal_form",setup(a){const{setShare:C}=t(),D=I({needLogin:!0});r((e=>{e.form_record_id&&uni.setStorageSync("personalFormRecordId",e.form_record_id)})),s((()=>{uni.removeStorageSync("personalFormRecordId")}));const E=o(null);o(null);const G=l((()=>D.requestData)),J=()=>{v({url:"/app/pages/index/index",mode:"reLaunch"})};return D.onLoad((e=>{var a;let t=e.share?e.share:null;C(t),null==(a=E.value)||a.refresh(),R({record_id:e.form_record_id}).then((e=>{let a={};e.data&&e.data.recordsFieldList&&e.data.recordsFieldList.forEach((e=>{a[e.field_key]=e.field_value})),D.data.value.forEach((e=>{if(a[e.id])try{e.field.value=JSON.parse(a[e.id]),"FormNumber"!=e.componentName&&"FormIdentity"!=e.componentName||(e.field.value=String(a[e.id]))}catch(t){e.field.value=a[e.id]}}))})).catch((()=>{}))})),D.onShow((e=>{var a;let t=e.share?e.share:null;t&&C(t),null==(a=E.value)||a.refresh()})),D.onHide(),D.onUnload(),D.onPageScroll(),(a,t)=>{const r=b(S("loading-page"),e),s=w,o=L,l=k;return n(),i(s,{style:_(a.themeColor())},{default:d((()=>[u(r,{loading:p(D).getLoading()},null,8,["loading"]),c(u(s,null,{default:d((()=>[m(" 自定义模板渲染 "),u(s,{class:"diy-template-wrap bg-index",style:_(p(D).pageStyle())},{default:d((()=>[u(N,{ref_key:"diyGroupRef",ref:E,data:p(D).data},null,8,["data"])])),_:1},8,["style"])])),_:1},512),[[f,1==p(G).status&&p(G).error&&0===p(G).error.length&&!p(D).getLoading()]]),p(G).error&&p(G).error.length>0?(n(),i(s,{key:0,class:"w-screen h-screen flex flex-col"},{default:d((()=>[(n(!0),x(h,null,g(p(G).error.slice(0,1),((e,a)=>(n(),i(s,{class:"flex-1 flex flex-col items-center pt-[180rpx] px-[60rpx]",key:a},{default:d((()=>[u(o,{class:"nc-iconfont nc-icon-tanhaoV6mm text-[#ccc] mb-[30rpx] !text-[100rpx]"}),u(s,{class:"text-[38rpx] font-bold mt-3"},{default:d((()=>[j(y(e.title),1)])),_:2},1024),u(s,{class:"p-[30rpx] mt-10 w-full"},{default:d((()=>[u(s,{class:"flex w-full"},{default:d((()=>[u(s,{class:"w-[30%] text-[#999] text-left"},{default:d((()=>[j(y(e.type),1)])),_:2},1024),u(s,{class:"w-[70%] text-left"},{default:d((()=>[j(y(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),u(s,{class:"pb-[260rpx]"},{default:d((()=>[u(l,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:J},{default:d((()=>[j(y(p(F)("close")),1)])),_:1})])),_:1})])),_:1})):m("v-if",!0)])),_:1},8,["style"])}}}),[["__scopeId","data-v-7b003139"]]);export{D as default};
