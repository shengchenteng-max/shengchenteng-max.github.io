import{_ as t}from"./top-tabbar.e594c8c6.js";import{d as a,r as e,J as s,o as l,c as o,w as r,b as n,e as u,A as c,y as p,z as i,g as m,n as f,a as d,ag as x,i as _,j as v,F as y,k as b,G as h,t as j,ah as g}from"./index-837da579.js";import{_ as T}from"./u-loading-icon.57b9bf82.js";import{_ as w}from"./u-modal.d26bb06e.js";import{g as C}from"./pay.e0795902.js";import{t as k}from"./topTabbar.ede9ed93.js";import"./manifest.ed582bbb.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.030b2c5d.js";import"./u-popup.80b537cf.js";import"./u-transition.38ad69d8.js";import"./u-icon.963870f0.js";const P=a({__name:"result",setup(a){const P=e(null),R=e(!1);let S="",z=0,B=0;let L=k().setTopTabbarParam({title:"",isBack:!1});s((t=>{S=t.trade_type,z=t.trade_id,V()}));const V=()=>{C(S,z,{}).then((t=>{if(!uni.$u.test.isEmpty(t.data)){if(1==t.data.status&&B<5)return R.value=!0,B++,void setTimeout((()=>{V()}),1e3);P.value=t.data,R.value=!1}}))},A=()=>{var t;const a=decodeURIComponent(uni.getStorageSync("payReturn"));d(a?{url:a,mode:"reLaunch"}:{url:x(),param:{code:null==(t=P.value)?void 0:t.out_trade_no},mode:"reLaunch"})};return(a,e)=>{const s=_(v("top-tabbar"),t),d=y,x=b,C=h,k=_(v("u-loading-icon"),T),S=_(v("u-modal"),w);return l(),o(x,{style:f(a.themeColor())},{default:r((()=>[P.value?(l(),o(x,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:r((()=>[n(s,{ref:"topTabbarRef",data:u(L)},null,8,["data"]),n(x,{class:"flex-1 flex flex-col items-center w-full pt-[180rpx]"},{default:r((()=>[n(x,{class:c(["flex items-baseline",{"text-[#06c05d]":2==P.value.status,"text-red":2!=P.value.status}])},{default:r((()=>[n(d,{class:c(["nc-iconfont -mb-[4rpx] !text-[32rpx]",{"nc-icon-duihaoV6mm":2==P.value.status,"nc-icon-tanhaoV6mm":2!=P.value.status}])},null,8,["class"]),n(d,{class:"text-[36rpx] ml-[16rpx] font-500"},{default:r((()=>[p(i(2==P.value.status?"支付成功":"支付失败"),1)])),_:1})])),_:1},8,["class"]),n(x,{class:"text-[56rpx] font-500 mt-[60rpx] price-font"},{default:r((()=>[n(d,{class:"text-[36rpx] mr-[6rpx]"},{default:r((()=>[p(i(u(j)("currency")),1)])),_:1}),n(d,null,{default:r((()=>[p(i(u(g)(P.value.money)),1)])),_:1})])),_:1})])),_:1}),n(x,{class:"pb-[260rpx]"},{default:r((()=>[n(C,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:A},{default:r((()=>[p(i(2==P.value.status?u(j)("complete"):u(j)("close")),1)])),_:1})])),_:1})])),_:1})):m("v-if",!0),n(S,{show:R.value,showCancelButton:!0,confirmText:u(j)("pay.completePay"),cancelText:u(j)("pay.incompletePay"),onCancel:A,confirmColor:"var(--primary-color)"},{default:r((()=>[n(x,{class:"py-[20rpx]"},{default:r((()=>[n(k,{text:u(j)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{P as default};
