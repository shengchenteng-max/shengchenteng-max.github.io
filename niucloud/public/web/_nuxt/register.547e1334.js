import{E as ne,__tla as de}from"./el-input.f84bdb48.js";import{u as ce,E as ue,_ as me,d as pe,a as _e,b as ge,__tla as he}from"./index.vue.8384b162.js";import{_ as fe,__tla as ve}from"./nuxt-link.13472e92.js";import{f as be,R as ye,Q as xe,ah as we,h as _,C as L,a2 as ke,o as h,i as f,j as d,u as l,F as Ae,k as Ve,m as s,w as i,L as C,M as q,I as x,t as g,l as z,au as B,ar as Pe,as as Ce,at as qe,D as Ue,aj as t,aC as Se,T as Re,U as je,__tla as Ee}from"./entry.ac74755d.js";import{t as Le}from"./test.b3688895.js";import{_ as ze}from"./_plugin-vue_export-helper.c27b6911.js";import{__tla as Be}from"./index.95b7fbc8.js";import{__tla as Te}from"./vnode.290de06f.js";import{__tla as Fe}from"./debounce.30bd8664.js";let T,Qe=Promise.all([(()=>{try{return de}catch{}})(),(()=>{try{return he}catch{}})(),(()=>{try{return ve}catch{}})(),(()=>{try{return Ee}catch{}})(),(()=>{try{return Be}catch{}})(),(()=>{try{return Te}catch{}})(),(()=>{try{return Fe}catch{}})()]).then(async()=>{const U=b=>(Re("data-v-f9f2a066"),b=b(),je(),b),F={class:"w-full h-full bg-page flex items-center justify-center"},Q={class:"flex bg-white"},D={key:0,class:"bg-white w-[380px] p-[30px] h-[686px]"},G={class:"flex items-end my-[30px]"},H=["onClick"],I={class:"py-0 leading-none"},M={class:"flex justify-end leading-none"},O={key:0,class:"text-xs py-[50rpx] flex justify-center w-full"},Y={class:"text-primary"},J={class:"text-primary"},N={key:1,class:"mt-[20px] flex justify-center"},K={key:1,class:"flex flex-col items-center w-[380px] py-[100px] h-[556px]"},W=U(()=>d("div",{class:"title font-bold text-xl"},"\u6253\u5F00\u624B\u673A\u5FAE\u4FE1",-1)),X=U(()=>d("div",{class:"tips text-sm mt-[5px]"},"\u70B9\u51FB\u53F3\u4E0A\u89D2\u6253\u5F00\u626B\u4E00\u626B",-1)),Z={class:"qrcode mt-[30px] border leading-none"},$=be({__name:"register",setup(b){let ee=ye();const ae=xe(),p=we();p.getLoginConfig();const n=_(""),le=L(()=>{const e=[];return p.login.is_username&&e.push({type:"username",title:t("usernameRegister")}),p.login.is_mobile&&!p.login.is_bind_mobile&&e.push({type:"mobile",title:t("mobileRegister")}),n.value=e[0]?e[0].type:"",e}),v=_(!1);let u=_(!0);const o=ke({username:"",password:"",confirm_password:"",mobile:"",mobile_code:"",mobile_key:"",captcha_key:"",captcha_code:""}),re=L(()=>({username:{type:"string",required:n.value=="username",message:t("usernamePlaceholder"),trigger:["blur","change"]},password:{type:"string",required:n.value=="username",message:t("passwordPlaceholder"),trigger:["blur","change"]},confirm_password:[{type:"string",required:n.value=="username",message:t("confirmPasswordPlaceholder"),trigger:["blur","change"]},{validator(e,a,m){return a==o.password},message:t("confirmPasswordError"),trigger:["change","blur"]}],mobile:[{type:"string",required:n.value=="mobile"||p.login.is_bind_mobile,message:t("mobilePlaceholder"),trigger:["blur","change"]},{validator(e,a,m){return n.value!="mobile"&&!p.login.is_bind_mobile?!0:Le.mobile(a)},message:t("mobileError"),trigger:["change","blur"]}],mobile_code:{type:"string",required:n.value=="mobile"||p.login.is_bind_mobile,message:t("codePlaceholder"),trigger:["blur","change"]},captcha_code:{type:"string",required:n.value=="username",message:t("captchaPlaceholder"),trigger:["blur","change"]}})),w=_(),te=async()=>{var e;await((e=w.value)==null?void 0:e.validate(async(a,m)=>{if(a){if(v.value)return;v.value=!0,(n.value=="username"?Pe:Ce)(o).then(c=>{ae.setToken(c.data.token),ee.push({path:"/"})}).catch(()=>{v.value=!1,y.refresh()})}}))};let S=_(!1);qe().then(e=>{S.value=e.data});const y=ce(o);y.refresh();const R=_(null),se=async()=>{var e;await((e=w.value)==null?void 0:e.validateField("mobile",async(a,m)=>{var c;a&&((c=R.value)==null||c.send())}))},k=_(!0),A=_(!0),V=_(!0);return(e,a)=>{const m=ne,c=ue,oe=me,j=pe,E=_e,P=fe,ie=ge;return h(),f("div",F,[d("div",Q,[l(u)?(h(),f("div",D,[d("div",G,[(h(!0),f(Ae,null,Ve(l(le),r=>(h(),f("div",{class:Ue(["mr-[20px] text-base cursor-pointer leading-none",{"font-bold":n.value==r.type}]),onClick:De=>n.value=r.type},g(r.title),11,H))),256))]),s(ie,{model:o,ref_key:"formRef",ref:w,rules:l(re),"validate-on-rule-change":!1},{default:i(()=>[C(d("div",null,[s(c,{prop:"username"},{default:i(()=>[s(m,{modelValue:o.username,"onUpdate:modelValue":a[0]||(a[0]=r=>o.username=r),placeholder:("t"in e?e.t:l(t))("usernamePlaceholder"),clearable:"","inline-message":!0,readonly:k.value,onClick:a[1]||(a[1]=r=>k.value=!1),onBlur:a[2]||(a[2]=r=>k.value=!0)},null,8,["modelValue","placeholder","readonly"])]),_:1}),s(c,{prop:"password"},{default:i(()=>[s(m,{modelValue:o.password,"onUpdate:modelValue":a[3]||(a[3]=r=>o.password=r),placeholder:("t"in e?e.t:l(t))("passwordPlaceholder"),type:"password",clearable:"","show-password":!0,readonly:A.value,onClick:a[4]||(a[4]=r=>A.value=!1),onBlur:a[5]||(a[5]=r=>A.value=!0)},null,8,["modelValue","placeholder","readonly"])]),_:1}),s(c,{prop:"confirm_password"},{default:i(()=>[s(m,{modelValue:o.confirm_password,"onUpdate:modelValue":a[6]||(a[6]=r=>o.confirm_password=r),placeholder:("t"in e?e.t:l(t))("confirmPasswordPlaceholder"),type:"password",clearable:"","show-password":!0,readonly:V.value,onClick:a[7]||(a[7]=r=>V.value=!1),onBlur:a[8]||(a[8]=r=>V.value=!0)},null,8,["modelValue","placeholder","readonly"])]),_:1})],512),[[q,n.value=="username"]]),C(d("div",null,[s(c,{prop:"mobile"},{default:i(()=>[s(m,{modelValue:o.mobile,"onUpdate:modelValue":a[9]||(a[9]=r=>o.mobile=r),placeholder:("t"in e?e.t:l(t))("mobilePlaceholder"),clearable:""},null,8,["modelValue","placeholder"])]),_:1}),s(c,{prop:"mobile_code"},{default:i(()=>[s(m,{modelValue:o.mobile_code,"onUpdate:modelValue":a[11]||(a[11]=r=>o.mobile_code=r),placeholder:("t"in e?e.t:l(t))("codePlaceholder")},{suffix:i(()=>[s(oe,{mobile:o.mobile,type:"login",modelValue:o.mobile_key,"onUpdate:modelValue":a[10]||(a[10]=r=>o.mobile_key=r),onClick:se,ref_key:"smsCodeRef",ref:R},null,8,["mobile","modelValue"])]),_:1},8,["modelValue","placeholder"])]),_:1})],512),[[q,n.value=="mobile"||l(p).login.is_bind_mobile]]),C(d("div",null,[s(c,{prop:"captcha_code"},{default:i(()=>[s(m,{modelValue:o.captcha_code,"onUpdate:modelValue":a[13]||(a[13]=r=>o.captcha_code=r),placeholder:("t"in e?e.t:l(t))("captchaPlaceholder")},{suffix:i(()=>[d("div",I,[s(j,{src:l(y).image.value,class:"h-[30px] cursor-pointer",onClick:a[12]||(a[12]=r=>l(y).refresh())},null,8,["src"])])]),_:1},8,["modelValue","placeholder"])]),_:1})],512),[[q,n.value=="username"]]),d("div",M,[s(P,{to:"/auth/login"},{default:i(()=>[s(E,{type:"primary",link:""},{default:i(()=>[x(g(("t"in e?e.t:l(t))("haveAccount"))+"\uFF0C"+g(("t"in e?e.t:l(t))("toLogin")),1)]),_:1})]),_:1})]),s(c,null,{default:i(()=>[s(E,{type:"primary",class:"mt-[20px] w-full",size:"large",onClick:te,loading:v.value},{default:i(()=>[x(g(v.value?("t"in e?e.t:l(t))("registering"):("t"in e?e.t:l(t))("register")),1)]),_:1},8,["loading"])]),_:1}),l(p).login.agreement_show?(h(),f("div",O,[x(g(("t"in e?e.t:l(t))("registerAgreeTips"))+" ",1),s(P,{to:"/auth/agreement?key=service"},{default:i(()=>[d("span",Y,g(("t"in e?e.t:l(t))("userAgreement")),1)]),_:1}),x(" "+g(("t"in e?e.t:l(t))("and"))+" ",1),s(P,{to:"/auth/agreement?key=privacy"},{default:i(()=>[d("span",J,g(("t"in e?e.t:l(t))("privacyAgreement")),1)]),_:1})])):z("",!0),l(S)?(h(),f("div",N,[d("span",{class:"iconfont icon-weixin1 text-[#1AAD19] !text-[24px]",onClick:a[14]||(a[14]=r=>B(u)?u.value=!l(u):u=!l(u))})])):z("",!0)]),_:1},8,["model","rules"])])):(h(),f("div",K,[W,X,d("div",Z,[s(j,{src:("img"in e?e.img:l(Se))("https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=gQHU7zwAAAAAAAAAAS5odHRwOi8vd2VpeGluLnFxLmNvbS9xLzAySlJSbU1Sb0hiMlQxOEcwSGhBY1AAAgTSfStkAwRYAgAA"),class:"w-[120px]"},null,8,["src"])]),d("div",{class:"mt-[60px] text-base cursor-pointer leading-none",onClick:a[15]||(a[15]=r=>B(u)?u.value=!l(u):u=!l(u))},"\u8D26\u53F7\u6CE8\u518C")]))])])}}});T=ze($,[["__scopeId","data-v-f9f2a066"]])});export{Qe as __tla,T as default};
